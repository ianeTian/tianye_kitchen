<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç”°é‡çš„å¨æˆ¿</title>
    <script src="https://unpkg.com/vue@2.6.14/dist/vue.js"></script>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'PingFang SC', 'Helvetica Neue', Arial, sans-serif;
        }
        
        body {
            background-color: #FFF9F5;
            color: #5A4A42;
            line-height: 1.6;
        }
        
        .app-container {
			max-width: 1200px;
			margin: 0 auto;
			min-height: 100vh;
		}

        
        /* Header ä¿æŒåŸæ · */
        header {
			background-color: transparent;
			padding: 15px 0;
			text-align: center;
			margin-bottom: 20px;
			border-radius: 15px;
			box-shadow: 0 4px 12px rgba(255, 182, 193, 0.3);
			position: relative;
		}

        .header-image {
            max-width: 100%;
            height: auto;
            display: block;
            margin: 0 auto;
            border-radius: 10px;
        }

        .cart-header {
            background-color: #7ee2a3; 
        }
        
        .back-button {
            position: absolute;
            left: 15px;
            top: 50%;
            transform: translateY(-50%);
            color: white;
            text-decoration: none;
            font-size: 16px;
            font-weight: bold;
        }
        
        h1 {
            font-size: 22px;
            font-weight: 600;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.1);
        }

        /* ä¸»å†…å®¹åŒºï¼ˆå¯¼èˆªæ  + å•†å“åˆ—è¡¨ï¼‰ */
        .main-layout {
            display: flex;
        }

        /* å·¦ä¾§å¯¼èˆªæ ï¼ˆPCç«¯ï¼‰ */
        .side-nav {
			width: 180px;
			background-color: white;
			padding: 20px 0;
			box-shadow: 2px 0 10px rgba(0,0,0,0.05);
			position: sticky;
			top: 20px; /* é¿å…å’ŒHeaderé‡å  */
			height: calc(100vh - 20px);
			overflow-y: auto;
			flex-shrink: 0;
		}
        
        .nav-item {
            padding: 12px 20px;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 15px;
            color: #5A4A42;
            border-left: 3px solid transparent;
        }
        
        .nav-item:active, .nav-item.active {
            background-color: #FFF0F2;
            color: #FF6B6B;
            border-left: 3px solid #FF6B6B;
        }        
        
        /* ä¸»å†…å®¹åŒºï¼ˆå•†å“åˆ—è¡¨ï¼‰ */
        .main-content {
			flex: 1;
			padding: 0 20px;
			padding-bottom: 100px;
		}
        
        .category {
            scroll-margin-top: 20px;
            margin-bottom: 25px;
        }
        
        .category-title {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 15px;
            padding-bottom: 8px;
            border-bottom: 2px solid #FFB6C1;
            color: #5A4A42;
            position: relative;
            padding-left: 15px;
        }
        
        .category-title::before {
            content: "";
            position: absolute;
            left: 0;
            top: 5px;
            height: 20px;
            width: 5px;
            background-color: #FFB6C1;
            border-radius: 5px;
        }
        
        /* å•†å“åˆ—è¡¨å¸ƒå±€ */
        .menu-items {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
            gap: 15px;
        }
        
        .menu-item {
            background-color: white;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 4px 15px rgba(0,0,0,0.05);
            transition: all 0.3s ease;
            position: relative;
            border: 1px solid #FFE8EB;
        }
        
        .menu-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(255, 182, 193, 0.2);
        }
        
        .featured-badge {
            position: absolute;
            top: 10px;
            right: 10px;
            background-color: #FF9AA2;
            color: white;
            font-size: 12px;
            padding: 3px 10px;
            border-radius: 15px;
            font-weight: bold;
            z-index: 2;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        
        .item-image {
            width: 100%;
            height: 120px;
            object-fit: cover;
            border-bottom: 1px solid #FFE8EB;
        }
        
        .item-details {
            padding: 12px;
        }
        
        .item-name {
            font-weight: bold;
            margin-bottom: 5px;
            font-size: 16px;
            color: #5A4A42;
        }
        
        .item-desc {
            font-size: 12px;
            color: #A89F99;
            margin-bottom: 10px;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }
        
        .item-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .item-price {
            font-weight: bold;
            color: #FF9AA2;
            font-size: 16px;
        }
        
        .spicy-level {
            display: flex;
            align-items: center;
        }
        
        .pepper-icon {
            color: #FF6B6B;
            font-size: 14px;
            margin-right: 2px;
        }
        
        .add-to-cart {
            background-color: #FF9AA2;
            color: white;
            border: none;
            border-radius: 8px;
            padding: 8px 10px;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.3s;
            width: 100%;
            margin-top: 5px;
            font-weight: bold;
        }
        
        .add-to-cart:hover {
            background-color: #FF9AA2;
            transform: scale(0.98);
        }
        
        .add-to-cart.added-to-cart {
            background-color: #A8E6CF;
            color: white;
        }
        
        /* è´­ç‰©è½¦åº•éƒ¨æ  */
        .cart-summary {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background-color: white;
            color: #5A4A42;
            padding: 15px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            z-index: 100;
            box-shadow: 0 -4px 15px rgba(0,0,0,0.05);
            border-top: 1px solid #FFE8EB;
        }
        
        .cart-total {
            font-size: 16px;
            font-weight: bold;
        }
        
        .view-cart {
            background-color: #FF9AA2;
            color: white;
            border: none;
            border-radius: 8px;
            padding: 10px 20px;
            font-size: 14px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s;
        }
        
        .view-cart:hover {
            background-color: #FF6B6B;
            transform: scale(0.98);
        }       
        
        /* è´­ç‰©è½¦é¡µé¢æ ·å¼ */
        .cart-items {
            margin-bottom: 15px;
        }
        
        .cart-item {
            background-color: white;
            border-radius: 15px;
            padding: 15px;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            box-shadow: 0 4px 15px rgba(0,0,0,0.05);
            border: 1px solid #FFE8EB;
        }
        
        .cart-item-image {
            width: 60px;
            height: 60px;
            object-fit: cover;
            border-radius: 10px;
            margin-right: 15px;
            border: 1px solid #FFE8EB;
        }
        
        .cart-item-details {
            flex: 1;
        }
        
        .cart-item-name {
            font-weight: bold;
            margin-bottom: 5px;
            color: #5A4A42;
        }
        
        .cart-item-price {
            color: #FF9AA2;
            font-weight: bold;
        }
        
        .quantity-control {
            display: flex;
            align-items: center;
            margin-top: 5px;
        }
        
        .quantity-btn {
            width: 25px;
            height: 25px;
            background-color: #FFE8EB;
            border: none;
            border-radius: 8px;
            font-size: 14px;
            cursor: pointer;
            color: #FF9AA2;
            font-weight: bold;
            transition: all 0.3s;
        }
        
        .quantity-btn:hover {
            background-color: #FFB6C1;
            color: white;
        }
        
        .quantity-input {
            width: 40px;
            text-align: center;
            margin: 0 5px;
            border: 1px solid #FFE8EB;
            border-radius: 8px;
            padding: 3px;
            color: #5A4A42;
        }
        
        .remove-item {
            color: #FF9AA2;
            background: none;
            border: none;
            margin-left: 15px;
            cursor: pointer;
            font-size: 20px;
            transition: all 0.3s;
        }
        
        .remove-item:hover {
            color: #FF6B6B;
            transform: scale(1.2);
        }
        
        .cart-actions {
            display: flex;
			justify-content: space-between;
			align-items: center;
			margin-top: 20px;
			padding: 15px 0;
			border-top: 1px solid #FFE8EB;
        }
        
        .clear-cart, .checkout {
            padding: 12px 20px;
            border: none;
            border-radius: 8px;
            font-size: 14px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s;
        }
        
        .clear-cart {
            background-color: #FFE8EB;
            /*color: #FF9AA2;*/
			color: #FF6B6B; /* ä¿®æ”¹æ–‡å­—é¢œè‰²ä¸ºçº¢è‰²ç³» */
        }
        
        .clear-cart:hover {
            background-color: #FFB6C1;
            color: white;
        }
        
        .cart-page {
            padding-bottom: 10px; /* å¢åŠ åº•éƒ¨å†…è¾¹è· */
        }

        .checkout {
            width: 100%;
			margin-top: 10px;
			background-color: #FF9AA2;
			color: white;
			border: none;
			border-radius: 8px;
			padding: 12px 20px;
			font-size: 14px;
			cursor: pointer;
			font-weight: bold;
			transition: all 0.3s;            
            bottom: 10px; /* è·ç¦»åº•éƒ¨è·ç¦» */
            margin-top: 20px;
            margin-bottom: 20px; /* å¢åŠ åº•éƒ¨å¤–è¾¹è· */
            z-index: 10;
        }
        
        .checkout:hover {
            background-color: #FF6B6B;
            transform: scale(0.98);
        }
        
		.checkout:disabled {
			background-color: #cccccc;
			cursor: not-allowed;
			transform: none;
		}
		
        .empty-cart {
            text-align: center;
            padding: 40px 0;
            color: #A89F99;
        }
        
        .empty-cart p:first-child {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 10px;
            color: #5A4A42;
        }
        
        .cart-item-count {
            color: #A89F99;
            font-size: 14px;
        }

        .cart-total-price {
            font-size: 18px;
            font-weight: bold;
            color: #FF9AA2;
        }

        .checkout-container {
            position: sticky;
            bottom: 70px;
            background-color: white;
            padding: 15px 0;
            margin-top: 20px;
            border-top: 1px solid #FFE8EB;
        }
		
		.cart-action-buttons {
			display: flex;
			gap: 10px;
			align-items: center;
		}
		
		.clear-cart, .back-to-menu {
			padding: 12px 20px;
			border: none;
			border-radius: 8px;
			font-size: 14px;
			cursor: pointer;
			font-weight: bold;
			transition: all 0.3s;
			flex: 1; /* ä½¿ä¸¤ä¸ªæŒ‰é’®å®½åº¦ç›¸åŒ */
		    min-width: 120px; /* è®¾ç½®æœ€å°å®½åº¦ */
		}

		.back-to-menu {
			background-color: #E8F5E9; /* æµ…ç»¿è‰²èƒŒæ™¯ */
			color: #4CAF50; /* ç»¿è‰²æ–‡å­— */
			margin-left: 10px; /* æ·»åŠ å·¦è¾¹è· */
		}
		
		.back-to-menu:hover {
			background-color: #C8E6C9; /* æ‚¬åœæ—¶ç¨æ·±çš„ç»¿è‰² */
			color: #2E7D32; /* æ‚¬åœæ—¶æ·±ç»¿è‰²æ–‡å­— */
		}
		
		.cart-summary-info {
			text-align: right;
		}
		
        /* ç§»åŠ¨ç«¯å“åº”å¼è®¾è®¡ */
        @media (max-width: 768px) {
            .main-layout {
                flex-direction: row; /* ä¿æŒæ¨ªå‘æ’åˆ— */
            }
            
            .side-nav {
                width: 80px; /* æ›´çª„çš„å¯¼èˆªæ  */
                padding: 10px 0;
                position: sticky; /* å›ºå®šåœ¨å·¦ä¾§ */
                height: calc(100vh - 20px); /* å‡å»Headeré«˜åº¦ */
                overflow-y: auto;
                top: 20px; /* é¿å…å’ŒHeaderé‡å  */
                z-index: 10;
            }
            
            .nav-item {
                padding: 10px 5px;
                font-size: 12px;
                text-align: center;
                border-left: none;
                border-bottom: 3px solid transparent;
            }
            
            /* .nav-item:active, .nav-item.active {
                border-left: none;
                border-bottom: 3px solid #FF6B6B;                
            }         */

            .main-content {
                margin-left: 0px; /* ä¸ºå›ºå®šå¯¼èˆªæ ç•™å‡ºç©ºé—´ */
                margin-bottom: 60px;
                padding: 0 10px;
                width: calc(100% - 80px);
            }
            
            /* æ‰‹æœºç«¯æ¯è¡Œåªæ˜¾ç¤º1ä¸ªèœå“ */
            .menu-items {
                grid-template-columns: 1fr;
            }
            
            .item-image {
                height: 150px;
            }
        }

        /* PC ç«¯ï¼šä¿ç•™ hover æ•ˆæœ  .nav-item:hover, .nav-item.active hoveræ•ˆæœå¯¼è‡´æ‰‹æœºç«¯ç‚¹å‡»å¯¼èˆªååˆ’èµ°ï¼ŒåŸå¯¼èˆªä½ç½®è¿˜æœ‰é«˜äº®ï¼Œè§£å†³æ–¹æ³•ä¹‹ä¸€æ˜¯è®¾å¤‡ç±»å‹æ£€æµ‹ + ç²¾å‡†æ ·å¼æ§åˆ¶*/
        /* @media (min-width: 769px) {
            .nav-item:hover {
                background-color: #FFF0F2;
                color: #FF6B6B;
                border-left: 3px solid #FF6B6B;
            }
        } */
		
        /* @media (max-width: 480px) {
            .side-nav {
                width: 70px;
            }
            
            .main-content {
                margin-left: 70px;
                width: calc(100% - 70px);
            }
            
            .item-image {
                height: 180px;
            }
        } */
		
    </style>
</head>
<body>
    <div id="app">
        <div class="app-container">
            <!-- Header ä¿æŒåŸæ · -->
            <header>
                <img src="https://tianyepic-1368290920.cos.ap-shanghai.myqcloud.com/header.png" 
                alt="ç”°é‡çš„å¨æˆ¿" class="header-image" loading="lazy">
            </header>

            <!-- ä¸»å†…å®¹åŒºï¼ˆå¯¼èˆªæ  + å•†å“åˆ—è¡¨ï¼‰ -->
            <div class="main-layout">
                <!-- å·¦ä¾§å¯¼èˆªæ ï¼ˆPCç«¯å’Œç§»åŠ¨ç«¯éƒ½å›ºå®šï¼‰ -->
                <div class="side-nav" v-show="currentPage === 'menu'">
                    <div v-for="category in categories" 
                         :key="category.name"
                         @click="scrollToCategory(category.name)"
                         class="nav-item"
                         :class="{ active: activeCategory === category.name }">
                        {{ category.name }}
                    </div>
                </div>
                
                <!-- ä¸»å†…å®¹åŒºï¼ˆå•†å“åˆ—è¡¨ï¼‰ -->
                <div class="main-content">
                    <!-- ä¸»ç‚¹èœé¡µé¢ -->
                    <div class="container menu-page" v-show="currentPage === 'menu'">
                        <div class="category" 
                             v-for="category in categories" 
                             :key="category.name"
                             :id="'category-' + category.name">
                            <h2 class="category-title">{{ category.name }}</h2>
                            <div class="menu-items">
                                <div class="menu-item" v-for="item in category.items" :key="item.id">
                                    <div class="featured-badge" v-if="item.isFeatured">æ‹›ç‰Œ</div>
                                    <img :src="item.image" :alt="item.name" class="item-image" loading="lazy">
                                    <div class="item-details">
                                        <div class="item-name">{{ item.name }}</div>
                                        <div class="item-desc">{{ item.description }}</div>
                                        <div class="item-footer">
                                            <div class="spicy-level">
                                                <span class="pepper-icon" v-for="n in item.spicyLevel">ğŸŒ¶ï¸</span>
                                            </div>
                                            <div class="item-price">Â¥{{ item.price }}</div>
                                        </div>
                                        <button class="add-to-cart" 
                                                @click="addToCart(item)"
                                                :class="{ 'added-to-cart': item.added }">
                                            {{ item.added ? 'âœ“ å·²æ·»åŠ ' : 'åŠ å…¥è´­ç‰©è½¦' }}
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- è´­ç‰©è½¦é¡µé¢ -->
					<div class="container cart-page" v-show="currentPage === 'cart'">
						<header class="cart-header">
							<a href="#" class="back-button" @click.prevent="switchPage('menu')">â† è¿”å›</a>
							<h1>ğŸ›’ æˆ‘çš„è´­ç‰©è½¦</h1>
						</header>
						
						<div class="cart-items">
							<div class="empty-cart" v-if="cart.length === 0">
								<p>è´­ç‰©è½¦æ˜¯ç©ºçš„</p>
								<p>å¿«å»æŒ‘é€‰ç¾é£Ÿå§~</p>
							</div>
							
							<div class="cart-item" v-for="item in cart" :key="item.cartId">
								<img :src="item.image" :alt="item.name" class="cart-item-image">
								<div class="cart-item-details">
									<div class="cart-item-name">{{ item.name }}</div>
									<div class="cart-item-price">Â¥{{ item.price.toFixed(2) }}</div>
									<div class="quantity-control">
										<button class="quantity-btn minus" @click="updateQuantity(item, -1)">-</button>
										<input type="number" class="quantity-input" v-model.number="item.quantity" min="1" @change="validateQuantity(item)">
										<button class="quantity-btn plus" @click="updateQuantity(item, 1)">+</button>
									</div>
								</div>
								<button class="remove-item" @click="removeItem(item)">Ã—</button>
							</div>
						</div>
						
						<div class="cart-actions" v-if="cart.length > 0">
							<div class="cart-action-buttons">
								<button class="clear-cart" @click="clearCart">æ¸…ç©ºè´­ç‰©è½¦</button>
								<button class="back-to-menu" @click="switchPage('menu')">è¿”å›èœå•</button>
							</div>
							<div class="cart-summary-info">
								<p class="cart-item-count">å…± {{ totalItems }} ä»¶å•†å“</p>
								<p class="cart-total-price">Â¥{{ totalPrice.toFixed(2) }}</p>
							</div>
						</div>
						
						<button class="checkout" 
								@click="checkout" 
								:disabled="cart.length === 0"
								v-if="currentPage === 'cart'">
							å»ç»“ç®—
						</button>
					</div>
					
                </div>
            </div>
        </div>
        
        <!-- è´­ç‰©è½¦åº•éƒ¨æ  -->
        <div class="cart-summary" v-show="cart.length > 0 && currentPage === 'menu'">
            <div class="cart-info">
                <div class="cart-total">æ€»è®¡: Â¥{{ totalPrice.toFixed(2) }}</div>
                <div class="cart-count">{{ totalItems }}ä¸ªèœå“</div>
            </div>
            <button class="view-cart" @click="switchPage('cart')">æŸ¥çœ‹è´­ç‰©è½¦</button>
        </div>
    </div>

    <script>
        new Vue({
            el: '#app',
            data() {
                return {
                    currentPage: 'menu',
                    activeCategory: 'æ‹›ç‰Œæ¨è',
                    categories: [
                        {
                            name: 'æ‹›ç‰Œæ¨è',
                            items: [
                                {
                                    id: 100,
                                    name: "ç•ªèŒ„è‚‰ä¸¸æ±¤",
                                    price: 0,
                                    image: "https://tianyepic-1368290920.cos.ap-shanghai.myqcloud.com/ç•ªèŒ„è‚‰ä¸¸æ±¤.png",
                                    description: "é€‰ç”¨æ–°é²œé‡Œè„Šè‚‰ï¼Œé…ä»¥ç§˜åˆ¶æ±¤åº•ï¼Œç•ªèŒ„é²œå«©ï¼Œé…¸çˆ½å¯å£ï¼Œç”°å¸ˆå‚…çš„å¾—æ„ä¹‹ä½œã€‚",
                                    spicyLevel: 0,
                                    isFeatured: true,
                                    added: false
                                },
                                {
                                    id: 101,
                                    name: "é’æ¤’è‚‰ä¸",
                                    price: 0,
                                    image: "https://tianyepic-1368290920.cos.ap-shanghai.myqcloud.com/é’æ¤’è‚‰ä¸.png",
                                    description: "é²œå«©è‚‰ä¸æ­é…è„†çˆ½é’æ¤’ï¼Œå®¶å¸¸ç¾å‘³ï¼Œä¸‹é¥­é¦–é€‰ï¼",
                                    spicyLevel: 1,
                                    isFeatured: true,
                                    added: false
                                },
                                {
                                    id: 102,
                                    name: "æ’éª¨ç‚–çº¢è–¯ç²‰ä¸",
                                    price: 0,
                                    image: "https://tianyepic-1368290920.cos.ap-shanghai.myqcloud.com/æ’éª¨çº¢è–¯ç²‰ä¸.png",
                                    description: "å†œå®¶è‡ªåˆ¶è…Šæ’éª¨ï¼Œè‡ªåˆ¶ç²‰ä¸ï¼Œåœ¨å¤–é¢å¯åƒä¸åˆ°å™¢ã€‚",
                                    spicyLevel: 1,
                                    isFeatured: true,
                                    added: false
                                }
                            ]
                        },
                        {
                            name: 'å·æ¹˜é£å‘³',
                            items: [
                                {
                                    id: 200,
                                    name: "è¾£å­é¸¡",
                                    price: 0,
                                    image: "https://tianyepic-1368290920.cos.ap-shanghai.myqcloud.com/è¾£å­é¸¡.png",
                                    description: "è¾£è¾£è¾£ï¼Œä½ èƒ½æ¥å—æˆ‘çš„è¾£å‘³æŒ‘æˆ˜å—ï¼Ÿ",
                                    spicyLevel: 4,
                                    added: false
                                },
                                {
                                    id: 201,
                                    name: "å¹²ç…¸è±†è§’",
                                    price: 0,
                                    image: "https://tianyepic-1368290920.cos.ap-shanghai.myqcloud.com/å¹²ç…¸è±†è§’.png",
                                    description: "å¤–é…¥é‡Œå«©ï¼Œè¶Šåš¼è¶Šé¦™ï¼",
                                    spicyLevel: 3,
                                    added: false
                                },
                                {
                                    id: 202,
                                    name: "æ²¹ç„–èŒ„å­",
                                    price: 0,
                                    image: "https://tianyepic-1368290920.cos.ap-shanghai.myqcloud.com/æ²¹ç„–èŒ„å­.png",
                                    description: "åƒèµ·æ¥è½¯è½¯çš„ã€‚",
                                    spicyLevel: 0,
                                    added: false
                                },
                                {
                                    id: 203,
                                    name: "å¯ä¹é¸¡ç¿…",
                                    price: 0,
                                    image: "https://tianyepic-1368290920.cos.ap-shanghai.myqcloud.com/å¯ä¹é¸¡ç¿….png",
                                    description: "å½“é…¥å«©çš„é¸¡ç¿…é‡ä¸Šå¿«ä¹æ°´ã€‚",
                                    spicyLevel: 0,
                                    added: false
                                },
                                {
                                    id: 204,
                                    name: "é…¸èœç‚’ç²‰çš®",
                                    price: 0,
                                    image: "https://tianyepic-1368290920.cos.ap-shanghai.myqcloud.com/é…¸èœç‚’ç²‰çš®.png",
                                    description: "ç¬¨èåœçš„æ‹›ç‰Œèœï¼Œæˆ‘ä¹Ÿä¼šåšã€‚",
                                    spicyLevel: 3,
                                    added: false
                                },
                                {
                                    id: 205,
                                    name: "é¦™å–·å–·ç‚’é¸¡",
                                    price: 0,
                                    image: "https://tianyepic-1368290920.cos.ap-shanghai.myqcloud.com/é¦™å–·å–·ç‚’é¸¡.png",
                                    description: "è¾£è¾£è¾£ï¼Œä½ èƒ½æ¥å—æˆ‘çš„è¾£å‘³æŒ‘æˆ˜å—ï¼Ÿ",
                                    spicyLevel: 3,
                                    added: false
                                }
                            ]
                        },
                        {
                            name: 'å®¶å¸¸èœè‚´',
                            items: [
                                {
                                    id: 300,
                                    name: "é’æ¤’ç‚’é¸¡è›‹",
                                    price: 0,
                                    image: "https://tianyepic-1368290920.cos.ap-shanghai.myqcloud.com/é’æ¤’ç‚’è›‹.png",
                                    description: "è‡ªå®¶çš„åœŸé¸¡è›‹ï¼Œæ›´é¦™ã€‚",
                                    spicyLevel: 2,
                                    added: false
                                },
                                {
                                    id: 310,
                                    name: "è¥¿çº¢æŸ¿ç‚’è›‹",
                                    price: 0,
                                    image: "https://tianyepic-1368290920.cos.ap-shanghai.myqcloud.com/è¥¿çº¢æŸ¿ç‚’è›‹.png",
                                    description: "ğŸ…ğŸ¥šğŸ˜ŠğŸ˜Šã€‚",
                                    spicyLevel: 0,
                                    added: false
                                },
                                {
                                    id: 301,
                                    name: "è…Šè‚ ",
                                    price: 0,
                                    image: "https://tianyepic-1368290920.cos.ap-shanghai.myqcloud.com/è…Šè‚ .png",
                                    description: "å†œå®¶è‡ªåˆ¶è…Šé¦™è‚ ï¼ŒåŸæ±åŸå‘³ã€‚",
                                    spicyLevel: 1,
                                    added: false
                                },
                                {
                                    id: 303,
                                    name: "é¦™å¹²ç‚’è‚‰",
                                    price: 0,
                                    image: "https://tianyepic-1368290920.cos.ap-shanghai.myqcloud.com/é¦™å¹²ç‚’è‚‰.png",
                                    description: "é…±é¦™è±†å¹²å«©è‚‰ç‰‡ï¼Œå’¸é²œä¸‹é¥­ï¼Œå›å‘³åè¶³ï¼",
                                    spicyLevel: 1,
                                    added: false
                                },
                                {
                                    id: 304,
                                    name: "èƒ¡èåœç‚’è‚‰",
                                    price: 0,
                                    image: "https://tianyepic-1368290920.cos.ap-shanghai.myqcloud.com/èƒ¡èåœç‚’è‚‰.png",
                                    description: "ç”œè„†èƒ¡èåœğŸ¥•é…å«©æ»‘è‚‰ï¼Œè¥å…»åˆç¾å‘³ï¼",
                                    spicyLevel: 0,
                                    added: false
                                },
                                {
                                    id: 305,
                                    name: "çº¢çƒ§é²«é±¼",
                                    price: 0,
                                    image: "https://tianyepic-1368290920.cos.ap-shanghai.myqcloud.com/çº¢çƒ§é²«é±¼.png",
                                    description: "é±¼è‚‰é²œå«©é…±é¦™æµ“ğŸŸï¼Œå®¶å¸¸ç»å…¸å¥½æ»‹å‘³ï¼",
                                    spicyLevel: 1,
                                    added: false
                                },
                                {
                                    id: 306,
                                    name: "å•¤é…’é¸­",
                                    price: 0,
                                    image: "https://tianyepic-1368290920.cos.ap-shanghai.myqcloud.com/å•¤é…’é¸­.png",
                                    description: "å•¤é…’ç‚–é¸­è‚‰é…¥çƒ‚ï¼Œé…’é¦™å››æº¢è¶…å…¥å‘³ï¼",
                                    spicyLevel: 2,
                                    added: false
                                },
                                {
                                    id: 307,
                                    name: "é…¸è¾£åœŸè±†ä¸",
                                    price: 0,
                                    image: "https://tianyepic-1368290920.cos.ap-shanghai.myqcloud.com/é…¸è¾£åœŸè±†ä¸.png",
                                    description: "è„†çˆ½é…¸è¾£åœŸè±†ä¸ï¼Œå¼€èƒƒè§£è…»å¿…ç‚¹èœï¼",
                                    spicyLevel: 1,
                                    added: false
                                },
                                {
                                    id: 308,
                                    name: "åœŸè±†ç‚–ç‰›è…©",
                                    price: 0,
                                    image: "https://tianyepic-1368290920.cos.ap-shanghai.myqcloud.com/åœŸè±†ç‚–ç‰›è…©.png",
                                    description: "è½¯ç³¯åœŸè±†é…é¦™æµ“ç‰›è…©ï¼Œæš–èƒƒåˆæ»¡è¶³ï¼",
                                    spicyLevel: 2,
                                    added: false
                                },
                                {
                                    id: 309,
                                    name: "é»„ç“œç«è…¿",
                                    price: 0,
                                    image: "https://tianyepic-1368290920.cos.ap-shanghai.myqcloud.com/é»„ç“œç«è…¿.png",
                                    description: "è¿‡ä¸€è¿‡æƒ³åƒæ·€ç²‰è‚ çš„ç˜¾ã€‚",
                                    spicyLevel: 0,
                                    added: false
                                }
                            ]
                        },
                        {
                            name: 'æ¸…æ·¡èœå“',
                            items: [
                                {
                                    id: 400,
                                    name: "æ¸…ç‚’æ—¶è”¬",
                                    price: 0,
                                    image: "https://tianyepic-1368290920.cos.ap-shanghai.myqcloud.com/æ¸…ç‚’æ—¶è”¬.png",
                                    description: "æˆ‘ä¼šç‚’å„ç§é’èœï¼Œå¥åº·åˆç¾å‘³~",
                                    spicyLevel: 0,
                                    added: false
                                },
                                {
                                    id: 401,
                                    name: "è™¾ä»è’¸è›‹",
                                    price: 0,
                                    image: "https://tianyepic-1368290920.cos.ap-shanghai.myqcloud.com/è™¾ä»è’¸è›‹.png",
                                    description: "é¸¡è›‹ä¸é«˜æ±¤å®Œç¾æ¯”ä¾‹è’¸åˆ¶ï¼Œè¡¨é¢å…‰æ»‘å¦‚é•œï¼Œé…ä»¥æ–°é²œè™¾ä»ï¼Œå£æ„Ÿç»†è…»ã€‚",
                                    spicyLevel: 0,
                                    added: false
                                },
                                {
                                    id: 402,
                                    name: "ç‰ç±³æ’éª¨æ±¤",
                                    price: 0,
                                    image: "https://tianyepic-1368290920.cos.ap-shanghai.myqcloud.com/ç‰ç±³æ’éª¨æ±¤.png",
                                    description: "é²œç”œç‰ç±³ç‚–è½¯å«©æ’éª¨ï¼Œæš–å¿ƒæš–èƒƒï¼Œæ»‹è¡¥åˆç¾å‘³ï¼",
                                    spicyLevel: 0,
                                    added: false
                                },
                                {
                                    id: 403,
                                    name: "æ¸…ç‚’ä¸ç“œ",
                                    price: 0,
                                    image: "https://tianyepic-1368290920.cos.ap-shanghai.myqcloud.com/æ¸…ç‚’ä¸ç“œ.png",
                                    description: "æ¸…æ¸…ç”œç”œçš„ä¸ç“œï¼Œæˆ‘å–œæ¬¢(â¤ Ï‰ â¤)",
                                    spicyLevel: 0,
                                    added: false
                                },
                                {
                                    id: 404,
                                    name: "æ¸…ç‚’èŠ±èœ",
                                    price: 0,
                                    image: "https://tianyepic-1368290920.cos.ap-shanghai.myqcloud.com/æ¸…ç‚’èŠ±èœ.png",
                                    description: "å‡è‚¥æ­æ¡£ã€‚",
                                    spicyLevel: 0,
                                    added: false
                                },
                                {
                                    id: 405,
                                    name: "è™¾ä»ç‰ç±³ç²’",
                                    price: 0,
                                    image: "https://tianyepic-1368290920.cos.ap-shanghai.myqcloud.com/è™¾ä»ç‰ç±³ç²’.png",
                                    description: "æ˜¯è™¾ä»ç‰ç±³ç²’ä¸æ˜¯å“äººç‰ç±³ç²’ã€‚",
                                    spicyLevel: 0,
                                    added: false
                                },
                                {
                                    id: 406,
                                    name: "æ¸…ç‚’çº¢è–¯å°–",
                                    price: 0,
                                    image: "https://tianyepic-1368290920.cos.ap-shanghai.myqcloud.com/æ¸…ç‚’çº¢è–¯å°–.png",
                                    description: "çº¢è–¯å°–å¥½åƒï¼Œçº¢è–¯ç‚’æ¥ä¹Ÿå¥½åƒï¼Œæƒ³å°å°å—ï¼Ÿ",
                                    spicyLevel: 0,
                                    added: false
                                }
                            ]
                        },
                        {
                            name: 'é²œæ¦¨æœæ±',
                            items: [
                                {
                                    id: 500,
                                    name: "é²œæ¦¨è¥¿ç“œæ±",
                                    price: 0,
                                    image: "https://tianyepic-1368290920.cos.ap-shanghai.myqcloud.com/é²œæ¦¨è¥¿ç“œæ±.png",
                                    description: "ğŸ‰å¤å¤©æ°´æœçš„goat!",
                                    spicyLevel: 0,
                                    added: false
                                },
                                {
                                    id: 501,
                                    name: "é²œæ¦¨é’ç“œæ±",
                                    price: 0,
                                    image: "https://tianyepic-1368290920.cos.ap-shanghai.myqcloud.com/é²œæ¦¨é’ç“œæ±.png",
                                    description: "ä½ ä»Šå¤©å–é’ç“œæ±äº†å—ï¼Ÿ",
                                    spicyLevel: 0,
                                    added: false
                                },
                                {
                                    id: 502,
                                    name: "é²œæ¦¨ç»¿è±†æ±",
                                    price: 0,
                                    image: "https://tianyepic-1368290920.cos.ap-shanghai.myqcloud.com/é²œæ¦¨ç»¿è±†æ±.png",
                                    description: "\"ä¸Šå¥½çš„ç»¿è±†ï¼Œä¹°äº›å§ã€‚\"  \"å°±æ˜¯è±†ç²‰ï¼å°±æ˜¯è±†ç²‰ï¼å°±æ˜¯è±†ç²‰ï¼\"",
                                    spicyLevel: 0,
                                    added: false
                                },
                                {
                                    id: 503,
                                    name: "äº”è°·è±†æµ†",
                                    price: 0,
                                    image: "https://tianyepic-1368290920.cos.ap-shanghai.myqcloud.com/äº”è°·è±†æµ†.png",
                                    description: "è¥å…»ç¾å‘³ï¼Œæ—©é¤å¿…å¤‡ã€‚",
                                    spicyLevel: 0,
                                    added: false
                                }
                            ]
                        },
                        {
                            name: 'è‡ªåˆ¶æœèŒ¶',
                            items: [
                                {
                                    id: 600,
                                    name: "å¤šè‚‰æ¡ƒæ¡ƒ",
                                    price: 0,
                                    image: "https://tianyepic-1368290920.cos.ap-shanghai.myqcloud.com/å¤šè‚‰æ¡ƒæ¡ƒ.png",
                                    description: "æ°´èœœæ¡ƒ+æŸ æª¬+ç»¿èŒ¶",
                                    spicyLevel: 0,
                                    added: false
                                },
                                {
                                    id: 601,
                                    name: "è¥¿ç“œå…»ä¹å¤š",
                                    price: 0,
                                    image: "https://tianyepic-1368290920.cos.ap-shanghai.myqcloud.com/è¥¿ç“œå…»ä¹å¤š.png",
                                    description: "è¥¿ç“œ+å…»ä¹å¤š+é›ªç¢§",
                                    spicyLevel: 0,
                                    added: false
                                },
                                {
                                    id: 602,
                                    name: "èŠ’èŠ’æŸ æª¬èŒ¶",
                                    price: 0,
                                    image: "https://tianyepic-1368290920.cos.ap-shanghai.myqcloud.com/èŠ’èŠ’æŸ æª¬èŒ¶.png",
                                    description: "èŠ’æœ+æŸ æª¬+èŒ‰è‰èŠ±èŒ¶",
                                    spicyLevel: 0,
                                    added: false
                                },
                                {
                                    id: 603,
                                    name: "é’ææŸ æª¬èŒ¶",
                                    price: 0,
                                    image: "https://tianyepic-1368290920.cos.ap-shanghai.myqcloud.com/é’ææŸ æª¬èŒ¶.png",
                                    description: "é’æ+æŸ æª¬+é›ªç¢§",
                                    spicyLevel: 0,
                                    added: false
                                },
                                {
                                    id: 604,
                                    name: "ç»¿è±†æ²™ç‰›ä¹³",
                                    price: 0,
                                    image: "https://tianyepic-1368290920.cos.ap-shanghai.myqcloud.com/ç»¿è±†æ²™ç‰›ä¹³.png",
                                    description: "ç»¿è±†+ç‰›å¥¶+å†°å—",
                                    spicyLevel: 0,
                                    added: false
                                },
                                {
                                    id: 605,
                                    name: "å¤šè‚‰è‘¡è„",
                                    price: 0,
                                    image: "https://tianyepic-1368290920.cos.ap-shanghai.myqcloud.com/å¤šè‚‰è‘¡è„.png",
                                    description: "è‘¡è„+é…¸å¥¶+å†°å—",
                                    spicyLevel: 0,
                                    added: false
                                }
                            ]
                        }
                    ],
                    cart: []
                }
            },
            created() {
                this.loadCart();
            },
            computed: {
                totalPrice() {
                    return this.cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
                },
                totalItems() {
                    return this.cart.reduce((sum, item) => sum + item.quantity, 0);
                }
            },
            methods: {
                generateCartId() {
                    return Date.now() + Math.random().toString(36).substr(2, 9);
                },
                loadCart() {
                    const savedCart = localStorage.getItem('restaurantCart');
                    if (savedCart) {
                        this.cart = JSON.parse(savedCart);
                        this.cart.forEach(item => {
                            if (!item.cartId) {
                                item.cartId = this.generateCartId();
                            }
                        });
                        this.updateAddedStatus();
                    }
                },
                scrollToCategory(categoryName) {
                    this.activeCategory = categoryName;
                    const element = document.getElementById('category-' + categoryName);
                    if (element) {
                        element.scrollIntoView({ 
                            behavior: 'smooth',
                            block: 'start'
                        });
                    }
                },
                handleScroll() {
                    
                    const categories = this.categories;
                    const scrollPosition = window.scrollY + 100;
                    
                    for (let i = categories.length - 1; i >= 0; i--) {
                        const element = document.getElementById('category-' + categories[i].name);
                        if (element && element.offsetTop <= scrollPosition) {
                            this.activeCategory = categories[i].name;                            
                            break;
                        }
                    }
                },
                switchPage(page) {
                    if (page === 'cart' && this.cart.length === 0) {
                        alert('è´­ç‰©è½¦æ˜¯ç©ºçš„ï¼Œè¯·å…ˆæ·»åŠ èœå“');
                        return;
                    }
                    this.currentPage = page;
                },
                addToCart(item) {
                    const existingItem = this.cart.find(cartItem => cartItem.id === item.id);
                    
                    if (existingItem) {
                        existingItem.quantity += 1;
                    } else {
                        this.cart.push({
                            ...item,
                            cartId: this.generateCartId(),
                            quantity: 1
                        });
                    }
                    
                    item.added = true;
                    // setTimeout(() => {
                    //     item.added = false;
                    // }, 1000);
                    
                    this.saveCart();
                },
                updateQuantity(item, change) {
                    item.quantity += change;
                    
                    if (item.quantity < 1) {
                        this.removeItem(item);
                    } else {
                        this.saveCart();
                    }
                },
                validateQuantity(item) {
                    if (item.quantity < 1) {
                        item.quantity = 1;
                    }
                    this.saveCart();
                },
                removeItem(item) {
                    this.cart = this.cart.filter(cartItem => cartItem.cartId !== item.cartId);
                    this.updateAddedStatus();
                    this.saveCart();
                },
                clearCart() {
                    if (this.cart.length === 0) return;
                    
                    if (confirm('ç¡®å®šè¦æ¸…ç©ºè´­ç‰©è½¦å—ï¼Ÿ')) {
                        this.cart = [];
                        this.updateAddedStatus();
                        this.saveCart();
                        this.currentPage = 'menu';
                    }
                },
                checkout() {
                    if (this.cart.length === 0) {
                        alert('è´­ç‰©è½¦æ˜¯ç©ºçš„ï¼Œè¯·å…ˆæ·»åŠ èœå“');
                        return;
                    }
                    
                    const orderDetails = this.cart.map(item => 
                        `${item.name} Ã— ${item.quantity} = Â¥${(item.price * item.quantity).toFixed(2)}`
                    ).join('\n');

                    const orderDetailsPush = this.cart.map(item => 
                        `${item.name} Ã— ${item.quantity}`
                    ).join('\n\n'); 
                    
                    alert(`å³å°†ä¸‹å•ï¼š\n\n${orderDetails}\n\næ€»è®¡: Â¥${this.totalPrice.toFixed(2)}\n\næ„Ÿè°¢æ‚¨çš„æƒ é¡¾ï¼`);
                    fetch(`https://sctapi.ftqq.com/SCT289192TKPE3LVjZ8Pk5ZOdl1AOtMhRi.send?title=å®¢äººä¸‹æ–°è®¢å•å•¦&desp=${encodeURIComponent(orderDetailsPush)}`);
                    
                    this.cart = [];
                    this.updateAddedStatus();
                    this.saveCart();
                    this.currentPage = 'menu';
                },
                saveCart() {
                    localStorage.setItem('restaurantCart', JSON.stringify(this.cart));
                },
                updateAddedStatus() {
                    this.categories.forEach(category => {
                        category.items.forEach(item => {
                            item.added = this.cart.some(cartItem => cartItem.id === item.id);
                        });
                    });
                }
            },
            mounted() {
                window.addEventListener('scroll', this.handleScroll);
            },
            beforeDestroy() {
                window.removeEventListener('scroll', this.handleScroll);
            }
        });
    </script>
</body>
</html>