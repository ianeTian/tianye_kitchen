<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>田野的厨房</title>
    <script src="https://unpkg.com/vue@2.6.14/dist/vue.js"></script>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'PingFang SC', 'Helvetica Neue', Arial, sans-serif;
        }
        
        body {
            background-color: #FFF9F5;
            color: #5A4A42;
            line-height: 1.6;
        }
        
        .app-container {
			max-width: 1200px;
			margin: 0 auto;
			min-height: 100vh;
		}

        
        /* Header 保持原样 */
        header {
			background-color: transparent;
			padding: 15px 0;
			text-align: center;
			margin-bottom: 20px;
			border-radius: 15px;
			box-shadow: 0 4px 12px rgba(255, 182, 193, 0.3);
			position: relative;
		}

        .header-image {
            max-width: 100%;
            height: auto;
            display: block;
            margin: 0 auto;
            border-radius: 10px;
        }

        .cart-header {
            background-color: #7ee2a3; 
        }
        
        .back-button {
            position: absolute;
            left: 15px;
            top: 50%;
            transform: translateY(-50%);
            color: white;
            text-decoration: none;
            font-size: 16px;
            font-weight: bold;
        }
        
        h1 {
            font-size: 22px;
            font-weight: 600;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.1);
        }

        /* 主内容区（导航栏 + 商品列表） */
        .main-layout {
            display: flex;
        }

        /* 左侧导航栏（PC端） */
        .side-nav {
			width: 180px;
			background-color: white;
			padding: 20px 0;
			box-shadow: 2px 0 10px rgba(0,0,0,0.05);
			position: sticky;
			top: 20px; /* 避免和Header重叠 */
			height: calc(100vh - 20px);
			overflow-y: auto;
			flex-shrink: 0;
		}
        
        .nav-item {
            padding: 12px 20px;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 15px;
            color: #5A4A42;
            border-left: 3px solid transparent;
        }
        
        .nav-item:active, .nav-item.active {
            background-color: #FFF0F2;
            color: #FF6B6B;
            border-left: 3px solid #FF6B6B;
        }        
        
        /* 主内容区（商品列表） */
        .main-content {
			flex: 1;
			padding: 0 20px;
			padding-bottom: 100px;
		}
        
        .category {
            scroll-margin-top: 20px;
            margin-bottom: 25px;
        }
        
        .category-title {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 15px;
            padding-bottom: 8px;
            border-bottom: 2px solid #FFB6C1;
            color: #5A4A42;
            position: relative;
            padding-left: 15px;
        }
        
        .category-title::before {
            content: "";
            position: absolute;
            left: 0;
            top: 5px;
            height: 20px;
            width: 5px;
            background-color: #FFB6C1;
            border-radius: 5px;
        }
        
        /* 商品列表布局 */
        .menu-items {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
            gap: 15px;
        }
        
        .menu-item {
            background-color: white;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 4px 15px rgba(0,0,0,0.05);
            transition: all 0.3s ease;
            position: relative;
            border: 1px solid #FFE8EB;
        }
        
        .menu-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(255, 182, 193, 0.2);
        }
        
        .featured-badge {
            position: absolute;
            top: 10px;
            right: 10px;
            background-color: #FF9AA2;
            color: white;
            font-size: 12px;
            padding: 3px 10px;
            border-radius: 15px;
            font-weight: bold;
            z-index: 2;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        
        .item-image {
            width: 100%;
            height: 120px;
            object-fit: cover;
            border-bottom: 1px solid #FFE8EB;
        }
        
        .item-details {
            padding: 12px;
        }
        
        .item-name {
            font-weight: bold;
            margin-bottom: 5px;
            font-size: 16px;
            color: #5A4A42;
        }
        
        .item-desc {
            font-size: 12px;
            color: #A89F99;
            margin-bottom: 10px;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }
        
        .item-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .item-price {
            font-weight: bold;
            color: #FF9AA2;
            font-size: 16px;
        }
        
        .spicy-level {
            display: flex;
            align-items: center;
        }
        
        .pepper-icon {
            color: #FF6B6B;
            font-size: 14px;
            margin-right: 2px;
        }
        
        .add-to-cart {
            background-color: #FF9AA2;
            color: white;
            border: none;
            border-radius: 8px;
            padding: 8px 10px;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.3s;
            width: 100%;
            margin-top: 5px;
            font-weight: bold;
        }
        
        .add-to-cart:hover {
            background-color: #FF9AA2;
            transform: scale(0.98);
        }
        
        .add-to-cart.added-to-cart {
            background-color: #A8E6CF;
            color: white;
        }
        
        /* 购物车底部栏 */
        .cart-summary {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background-color: white;
            color: #5A4A42;
            padding: 15px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            z-index: 100;
            box-shadow: 0 -4px 15px rgba(0,0,0,0.05);
            border-top: 1px solid #FFE8EB;
        }
        
        .cart-total {
            font-size: 16px;
            font-weight: bold;
        }
        
        .view-cart {
            background-color: #FF9AA2;
            color: white;
            border: none;
            border-radius: 8px;
            padding: 10px 20px;
            font-size: 14px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s;
        }
        
        .view-cart:hover {
            background-color: #FF6B6B;
            transform: scale(0.98);
        }       
        
        /* 购物车页面样式 */
        .cart-items {
            margin-bottom: 15px;
        }
        
        .cart-item {
            background-color: white;
            border-radius: 15px;
            padding: 15px;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            box-shadow: 0 4px 15px rgba(0,0,0,0.05);
            border: 1px solid #FFE8EB;
        }
        
        .cart-item-image {
            width: 60px;
            height: 60px;
            object-fit: cover;
            border-radius: 10px;
            margin-right: 15px;
            border: 1px solid #FFE8EB;
        }
        
        .cart-item-details {
            flex: 1;
        }
        
        .cart-item-name {
            font-weight: bold;
            margin-bottom: 5px;
            color: #5A4A42;
        }
        
        .cart-item-price {
            color: #FF9AA2;
            font-weight: bold;
        }
        
        .quantity-control {
            display: flex;
            align-items: center;
            margin-top: 5px;
        }
        
        .quantity-btn {
            width: 25px;
            height: 25px;
            background-color: #FFE8EB;
            border: none;
            border-radius: 8px;
            font-size: 14px;
            cursor: pointer;
            color: #FF9AA2;
            font-weight: bold;
            transition: all 0.3s;
        }
        
        .quantity-btn:hover {
            background-color: #FFB6C1;
            color: white;
        }
        
        .quantity-input {
            width: 40px;
            text-align: center;
            margin: 0 5px;
            border: 1px solid #FFE8EB;
            border-radius: 8px;
            padding: 3px;
            color: #5A4A42;
        }
        
        .remove-item {
            color: #FF9AA2;
            background: none;
            border: none;
            margin-left: 15px;
            cursor: pointer;
            font-size: 20px;
            transition: all 0.3s;
        }
        
        .remove-item:hover {
            color: #FF6B6B;
            transform: scale(1.2);
        }
        
        .cart-actions {
            display: flex;
			justify-content: space-between;
			align-items: center;
			margin-top: 20px;
			padding: 15px 0;
			border-top: 1px solid #FFE8EB;
        }
        
        .clear-cart, .checkout {
            padding: 12px 20px;
            border: none;
            border-radius: 8px;
            font-size: 14px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s;
        }
        
        .clear-cart {
            background-color: #FFE8EB;
            /*color: #FF9AA2;*/
			color: #FF6B6B; /* 修改文字颜色为红色系 */
        }
        
        .clear-cart:hover {
            background-color: #FFB6C1;
            color: white;
        }
        
        .cart-page {
            padding-bottom: 10px; /* 增加底部内边距 */
        }

        .checkout {
            width: 100%;
			margin-top: 10px;
			background-color: #FF9AA2;
			color: white;
			border: none;
			border-radius: 8px;
			padding: 12px 20px;
			font-size: 14px;
			cursor: pointer;
			font-weight: bold;
			transition: all 0.3s;            
            bottom: 10px; /* 距离底部距离 */
            margin-top: 20px;
            margin-bottom: 20px; /* 增加底部外边距 */
            z-index: 10;
        }
        
        .checkout:hover {
            background-color: #FF6B6B;
            transform: scale(0.98);
        }
        
		.checkout:disabled {
			background-color: #cccccc;
			cursor: not-allowed;
			transform: none;
		}
		
        .empty-cart {
            text-align: center;
            padding: 40px 0;
            color: #A89F99;
        }
        
        .empty-cart p:first-child {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 10px;
            color: #5A4A42;
        }
        
        .cart-item-count {
            color: #A89F99;
            font-size: 14px;
        }

        .cart-total-price {
            font-size: 18px;
            font-weight: bold;
            color: #FF9AA2;
        }

        .checkout-container {
            position: sticky;
            bottom: 70px;
            background-color: white;
            padding: 15px 0;
            margin-top: 20px;
            border-top: 1px solid #FFE8EB;
        }
		
		.cart-action-buttons {
			display: flex;
			gap: 10px;
			align-items: center;
		}
		
		.clear-cart, .back-to-menu {
			padding: 12px 20px;
			border: none;
			border-radius: 8px;
			font-size: 14px;
			cursor: pointer;
			font-weight: bold;
			transition: all 0.3s;
			flex: 1; /* 使两个按钮宽度相同 */
		    min-width: 120px; /* 设置最小宽度 */
		}

		.back-to-menu {
			background-color: #E8F5E9; /* 浅绿色背景 */
			color: #4CAF50; /* 绿色文字 */
			margin-left: 10px; /* 添加左边距 */
		}
		
		.back-to-menu:hover {
			background-color: #C8E6C9; /* 悬停时稍深的绿色 */
			color: #2E7D32; /* 悬停时深绿色文字 */
		}
		
		.cart-summary-info {
			text-align: right;
		}
		
        /* 移动端响应式设计 */
        @media (max-width: 768px) {
            .main-layout {
                flex-direction: row; /* 保持横向排列 */
            }
            
            .side-nav {
                width: 80px; /* 更窄的导航栏 */
                padding: 10px 0;
                position: sticky; /* 固定在左侧 */
                height: calc(100vh - 20px); /* 减去Header高度 */
                overflow-y: auto;
                top: 20px; /* 避免和Header重叠 */
                z-index: 10;
            }
            
            .nav-item {
                padding: 10px 5px;
                font-size: 12px;
                text-align: center;
                border-left: none;
                border-bottom: 3px solid transparent;
            }
            
            /* .nav-item:active, .nav-item.active {
                border-left: none;
                border-bottom: 3px solid #FF6B6B;                
            }         */

            .main-content {
                margin-left: 0px; /* 为固定导航栏留出空间 */
                margin-bottom: 60px;
                padding: 0 10px;
                width: calc(100% - 80px);
            }
            
            /* 手机端每行只显示1个菜品 */
            .menu-items {
                grid-template-columns: 1fr;
            }
            
            .item-image {
                height: 150px;
            }
        }

        /* PC 端：保留 hover 效果  .nav-item:hover, .nav-item.active hover效果导致手机端点击导航后划走，原导航位置还有高亮，解决方法之一是设备类型检测 + 精准样式控制*/
        /* @media (min-width: 769px) {
            .nav-item:hover {
                background-color: #FFF0F2;
                color: #FF6B6B;
                border-left: 3px solid #FF6B6B;
            }
        } */
		
        /* @media (max-width: 480px) {
            .side-nav {
                width: 70px;
            }
            
            .main-content {
                margin-left: 70px;
                width: calc(100% - 70px);
            }
            
            .item-image {
                height: 180px;
            }
        } */
		
    </style>
</head>
<body>
    <div id="app">
        <div class="app-container">
            <!-- Header 保持原样 -->
            <header>
                <img src="https://tianyepic-1368290920.cos.ap-shanghai.myqcloud.com/header.png" 
                alt="田野的厨房" class="header-image" loading="lazy">
            </header>

            <!-- 主内容区（导航栏 + 商品列表） -->
            <div class="main-layout">
                <!-- 左侧导航栏（PC端和移动端都固定） -->
                <div class="side-nav" v-show="currentPage === 'menu'">
                    <div v-for="category in categories" 
                         :key="category.name"
                         @click="scrollToCategory(category.name)"
                         class="nav-item"
                         :class="{ active: activeCategory === category.name }">
                        {{ category.name }}
                    </div>
                </div>
                
                <!-- 主内容区（商品列表） -->
                <div class="main-content">
                    <!-- 主点菜页面 -->
                    <div class="container menu-page" v-show="currentPage === 'menu'">
                        <div class="category" 
                             v-for="category in categories" 
                             :key="category.name"
                             :id="'category-' + category.name">
                            <h2 class="category-title">{{ category.name }}</h2>
                            <div class="menu-items">
                                <div class="menu-item" v-for="item in category.items" :key="item.id">
                                    <div class="featured-badge" v-if="item.isFeatured">招牌</div>
                                    <img :src="item.image" :alt="item.name" class="item-image" loading="lazy">
                                    <div class="item-details">
                                        <div class="item-name">{{ item.name }}</div>
                                        <div class="item-desc">{{ item.description }}</div>
                                        <div class="item-footer">
                                            <div class="spicy-level">
                                                <span class="pepper-icon" v-for="n in item.spicyLevel">🌶️</span>
                                            </div>
                                            <div class="item-price">¥{{ item.price }}</div>
                                        </div>
                                        <button class="add-to-cart" 
                                                @click="addToCart(item)"
                                                :class="{ 'added-to-cart': item.added }">
                                            {{ item.added ? '✓ 已添加' : '加入购物车' }}
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- 购物车页面 -->
					<div class="container cart-page" v-show="currentPage === 'cart'">
						<header class="cart-header">
							<a href="#" class="back-button" @click.prevent="switchPage('menu')">← 返回</a>
							<h1>🛒 我的购物车</h1>
						</header>
						
						<div class="cart-items">
							<div class="empty-cart" v-if="cart.length === 0">
								<p>购物车是空的</p>
								<p>快去挑选美食吧~</p>
							</div>
							
							<div class="cart-item" v-for="item in cart" :key="item.cartId">
								<img :src="item.image" :alt="item.name" class="cart-item-image">
								<div class="cart-item-details">
									<div class="cart-item-name">{{ item.name }}</div>
									<div class="cart-item-price">¥{{ item.price.toFixed(2) }}</div>
									<div class="quantity-control">
										<button class="quantity-btn minus" @click="updateQuantity(item, -1)">-</button>
										<input type="number" class="quantity-input" v-model.number="item.quantity" min="1" @change="validateQuantity(item)">
										<button class="quantity-btn plus" @click="updateQuantity(item, 1)">+</button>
									</div>
								</div>
								<button class="remove-item" @click="removeItem(item)">×</button>
							</div>
						</div>
						
						<div class="cart-actions" v-if="cart.length > 0">
							<div class="cart-action-buttons">
								<button class="clear-cart" @click="clearCart">清空购物车</button>
								<button class="back-to-menu" @click="switchPage('menu')">返回菜单</button>
							</div>
							<div class="cart-summary-info">
								<p class="cart-item-count">共 {{ totalItems }} 件商品</p>
								<p class="cart-total-price">¥{{ totalPrice.toFixed(2) }}</p>
							</div>
						</div>
						
						<button class="checkout" 
								@click="checkout" 
								:disabled="cart.length === 0"
								v-if="currentPage === 'cart'">
							去结算
						</button>
					</div>
					
                </div>
            </div>
        </div>
        
        <!-- 购物车底部栏 -->
        <div class="cart-summary" v-show="cart.length > 0 && currentPage === 'menu'">
            <div class="cart-info">
                <div class="cart-total">总计: ¥{{ totalPrice.toFixed(2) }}</div>
                <div class="cart-count">{{ totalItems }}个菜品</div>
            </div>
            <button class="view-cart" @click="switchPage('cart')">查看购物车</button>
        </div>
    </div>

    <script>
        new Vue({
            el: '#app',
            data() {
                return {
                    currentPage: 'menu',
                    activeCategory: '招牌推荐',
                    categories: [
                        {
                            name: '招牌推荐',
                            items: [
                                {
                                    id: 100,
                                    name: "番茄肉丸汤",
                                    price: 0,
                                    image: "https://tianyepic-1368290920.cos.ap-shanghai.myqcloud.com/番茄肉丸汤.png",
                                    description: "选用新鲜里脊肉，配以秘制汤底，番茄鲜嫩，酸爽可口，田师傅的得意之作。",
                                    spicyLevel: 0,
                                    isFeatured: true,
                                    added: false
                                },
                                {
                                    id: 101,
                                    name: "青椒肉丝",
                                    price: 0,
                                    image: "https://tianyepic-1368290920.cos.ap-shanghai.myqcloud.com/青椒肉丝.png",
                                    description: "鲜嫩肉丝搭配脆爽青椒，家常美味，下饭首选！",
                                    spicyLevel: 1,
                                    isFeatured: true,
                                    added: false
                                },
                                {
                                    id: 102,
                                    name: "排骨炖红薯粉丝",
                                    price: 0,
                                    image: "https://tianyepic-1368290920.cos.ap-shanghai.myqcloud.com/排骨红薯粉丝.png",
                                    description: "农家自制腊排骨，自制粉丝，在外面可吃不到噢。",
                                    spicyLevel: 1,
                                    isFeatured: true,
                                    added: false
                                }
                            ]
                        },
                        {
                            name: '川湘风味',
                            items: [
                                {
                                    id: 200,
                                    name: "辣子鸡",
                                    price: 0,
                                    image: "https://tianyepic-1368290920.cos.ap-shanghai.myqcloud.com/辣子鸡.png",
                                    description: "辣辣辣，你能接受我的辣味挑战吗？",
                                    spicyLevel: 4,
                                    added: false
                                },
                                {
                                    id: 201,
                                    name: "干煸豆角",
                                    price: 0,
                                    image: "https://tianyepic-1368290920.cos.ap-shanghai.myqcloud.com/干煸豆角.png",
                                    description: "外酥里嫩，越嚼越香！",
                                    spicyLevel: 3,
                                    added: false
                                },
                                {
                                    id: 202,
                                    name: "油焖茄子",
                                    price: 0,
                                    image: "https://tianyepic-1368290920.cos.ap-shanghai.myqcloud.com/油焖茄子.png",
                                    description: "吃起来软软的。",
                                    spicyLevel: 0,
                                    added: false
                                },
                                {
                                    id: 203,
                                    name: "可乐鸡翅",
                                    price: 0,
                                    image: "https://tianyepic-1368290920.cos.ap-shanghai.myqcloud.com/可乐鸡翅.png",
                                    description: "当酥嫩的鸡翅遇上快乐水。",
                                    spicyLevel: 0,
                                    added: false
                                },
                                {
                                    id: 204,
                                    name: "酸菜炒粉皮",
                                    price: 0,
                                    image: "https://tianyepic-1368290920.cos.ap-shanghai.myqcloud.com/酸菜炒粉皮.png",
                                    description: "笨萝卜的招牌菜，我也会做。",
                                    spicyLevel: 3,
                                    added: false
                                },
                                {
                                    id: 205,
                                    name: "香喷喷炒鸡",
                                    price: 0,
                                    image: "https://tianyepic-1368290920.cos.ap-shanghai.myqcloud.com/香喷喷炒鸡.png",
                                    description: "辣辣辣，你能接受我的辣味挑战吗？",
                                    spicyLevel: 3,
                                    added: false
                                }
                            ]
                        },
                        {
                            name: '家常菜肴',
                            items: [
                                {
                                    id: 300,
                                    name: "青椒炒鸡蛋",
                                    price: 0,
                                    image: "https://tianyepic-1368290920.cos.ap-shanghai.myqcloud.com/青椒炒蛋.png",
                                    description: "自家的土鸡蛋，更香。",
                                    spicyLevel: 2,
                                    added: false
                                },
                                {
                                    id: 310,
                                    name: "西红柿炒蛋",
                                    price: 0,
                                    image: "https://tianyepic-1368290920.cos.ap-shanghai.myqcloud.com/西红柿炒蛋.png",
                                    description: "🍅🥚😊😊。",
                                    spicyLevel: 0,
                                    added: false
                                },
                                {
                                    id: 301,
                                    name: "腊肠",
                                    price: 0,
                                    image: "https://tianyepic-1368290920.cos.ap-shanghai.myqcloud.com/腊肠.png",
                                    description: "农家自制腊香肠，原汁原味。",
                                    spicyLevel: 1,
                                    added: false
                                },
                                {
                                    id: 303,
                                    name: "香干炒肉",
                                    price: 0,
                                    image: "https://tianyepic-1368290920.cos.ap-shanghai.myqcloud.com/香干炒肉.png",
                                    description: "酱香豆干嫩肉片，咸鲜下饭，回味十足！",
                                    spicyLevel: 1,
                                    added: false
                                },
                                {
                                    id: 304,
                                    name: "胡萝卜炒肉",
                                    price: 0,
                                    image: "https://tianyepic-1368290920.cos.ap-shanghai.myqcloud.com/胡萝卜炒肉.png",
                                    description: "甜脆胡萝卜🥕配嫩滑肉，营养又美味！",
                                    spicyLevel: 0,
                                    added: false
                                },
                                {
                                    id: 305,
                                    name: "红烧鲫鱼",
                                    price: 0,
                                    image: "https://tianyepic-1368290920.cos.ap-shanghai.myqcloud.com/红烧鲫鱼.png",
                                    description: "鱼肉鲜嫩酱香浓🐟，家常经典好滋味！",
                                    spicyLevel: 1,
                                    added: false
                                },
                                {
                                    id: 306,
                                    name: "啤酒鸭",
                                    price: 0,
                                    image: "https://tianyepic-1368290920.cos.ap-shanghai.myqcloud.com/啤酒鸭.png",
                                    description: "啤酒炖鸭肉酥烂，酒香四溢超入味！",
                                    spicyLevel: 2,
                                    added: false
                                },
                                {
                                    id: 307,
                                    name: "酸辣土豆丝",
                                    price: 0,
                                    image: "https://tianyepic-1368290920.cos.ap-shanghai.myqcloud.com/酸辣土豆丝.png",
                                    description: "脆爽酸辣土豆丝，开胃解腻必点菜！",
                                    spicyLevel: 1,
                                    added: false
                                },
                                {
                                    id: 308,
                                    name: "土豆炖牛腩",
                                    price: 0,
                                    image: "https://tianyepic-1368290920.cos.ap-shanghai.myqcloud.com/土豆炖牛腩.png",
                                    description: "软糯土豆配香浓牛腩，暖胃又满足！",
                                    spicyLevel: 2,
                                    added: false
                                },
                                {
                                    id: 309,
                                    name: "黄瓜火腿",
                                    price: 0,
                                    image: "https://tianyepic-1368290920.cos.ap-shanghai.myqcloud.com/黄瓜火腿.png",
                                    description: "过一过想吃淀粉肠的瘾。",
                                    spicyLevel: 0,
                                    added: false
                                }
                            ]
                        },
                        {
                            name: '清淡菜品',
                            items: [
                                {
                                    id: 400,
                                    name: "清炒时蔬",
                                    price: 0,
                                    image: "https://tianyepic-1368290920.cos.ap-shanghai.myqcloud.com/清炒时蔬.png",
                                    description: "我会炒各种青菜，健康又美味~",
                                    spicyLevel: 0,
                                    added: false
                                },
                                {
                                    id: 401,
                                    name: "虾仁蒸蛋",
                                    price: 0,
                                    image: "https://tianyepic-1368290920.cos.ap-shanghai.myqcloud.com/虾仁蒸蛋.png",
                                    description: "鸡蛋与高汤完美比例蒸制，表面光滑如镜，配以新鲜虾仁，口感细腻。",
                                    spicyLevel: 0,
                                    added: false
                                },
                                {
                                    id: 402,
                                    name: "玉米排骨汤",
                                    price: 0,
                                    image: "https://tianyepic-1368290920.cos.ap-shanghai.myqcloud.com/玉米排骨汤.png",
                                    description: "鲜甜玉米炖软嫩排骨，暖心暖胃，滋补又美味！",
                                    spicyLevel: 0,
                                    added: false
                                },
                                {
                                    id: 403,
                                    name: "清炒丝瓜",
                                    price: 0,
                                    image: "https://tianyepic-1368290920.cos.ap-shanghai.myqcloud.com/清炒丝瓜.png",
                                    description: "清清甜甜的丝瓜，我喜欢(❤ ω ❤)",
                                    spicyLevel: 0,
                                    added: false
                                },
                                {
                                    id: 404,
                                    name: "清炒花菜",
                                    price: 0,
                                    image: "https://tianyepic-1368290920.cos.ap-shanghai.myqcloud.com/清炒花菜.png",
                                    description: "减肥搭档。",
                                    spicyLevel: 0,
                                    added: false
                                },
                                {
                                    id: 405,
                                    name: "虾仁玉米粒",
                                    price: 0,
                                    image: "https://tianyepic-1368290920.cos.ap-shanghai.myqcloud.com/虾仁玉米粒.png",
                                    description: "是虾仁玉米粒不是吓人玉米粒。",
                                    spicyLevel: 0,
                                    added: false
                                },
                                {
                                    id: 406,
                                    name: "清炒红薯尖",
                                    price: 0,
                                    image: "https://tianyepic-1368290920.cos.ap-shanghai.myqcloud.com/清炒红薯尖.png",
                                    description: "红薯尖好吃，红薯炒来也好吃，想尝尝吗？",
                                    spicyLevel: 0,
                                    added: false
                                }
                            ]
                        },
                        {
                            name: '鲜榨果汁',
                            items: [
                                {
                                    id: 500,
                                    name: "鲜榨西瓜汁",
                                    price: 0,
                                    image: "https://tianyepic-1368290920.cos.ap-shanghai.myqcloud.com/鲜榨西瓜汁.png",
                                    description: "🍉夏天水果的goat!",
                                    spicyLevel: 0,
                                    added: false
                                },
                                {
                                    id: 501,
                                    name: "鲜榨青瓜汁",
                                    price: 0,
                                    image: "https://tianyepic-1368290920.cos.ap-shanghai.myqcloud.com/鲜榨青瓜汁.png",
                                    description: "你今天喝青瓜汁了吗？",
                                    spicyLevel: 0,
                                    added: false
                                },
                                {
                                    id: 502,
                                    name: "鲜榨绿豆汁",
                                    price: 0,
                                    image: "https://tianyepic-1368290920.cos.ap-shanghai.myqcloud.com/鲜榨绿豆汁.png",
                                    description: "\"上好的绿豆，买些吧。\"  \"就是豆粉！就是豆粉！就是豆粉！\"",
                                    spicyLevel: 0,
                                    added: false
                                },
                                {
                                    id: 503,
                                    name: "五谷豆浆",
                                    price: 0,
                                    image: "https://tianyepic-1368290920.cos.ap-shanghai.myqcloud.com/五谷豆浆.png",
                                    description: "营养美味，早餐必备。",
                                    spicyLevel: 0,
                                    added: false
                                }
                            ]
                        },
                        {
                            name: '自制果茶',
                            items: [
                                {
                                    id: 600,
                                    name: "多肉桃桃",
                                    price: 0,
                                    image: "https://tianyepic-1368290920.cos.ap-shanghai.myqcloud.com/多肉桃桃.png",
                                    description: "水蜜桃+柠檬+绿茶",
                                    spicyLevel: 0,
                                    added: false
                                },
                                {
                                    id: 601,
                                    name: "西瓜养乐多",
                                    price: 0,
                                    image: "https://tianyepic-1368290920.cos.ap-shanghai.myqcloud.com/西瓜养乐多.png",
                                    description: "西瓜+养乐多+雪碧",
                                    spicyLevel: 0,
                                    added: false
                                },
                                {
                                    id: 602,
                                    name: "芒芒柠檬茶",
                                    price: 0,
                                    image: "https://tianyepic-1368290920.cos.ap-shanghai.myqcloud.com/芒芒柠檬茶.png",
                                    description: "芒果+柠檬+茉莉花茶",
                                    spicyLevel: 0,
                                    added: false
                                },
                                {
                                    id: 603,
                                    name: "青提柠檬茶",
                                    price: 0,
                                    image: "https://tianyepic-1368290920.cos.ap-shanghai.myqcloud.com/青提柠檬茶.png",
                                    description: "青提+柠檬+雪碧",
                                    spicyLevel: 0,
                                    added: false
                                },
                                {
                                    id: 604,
                                    name: "绿豆沙牛乳",
                                    price: 0,
                                    image: "https://tianyepic-1368290920.cos.ap-shanghai.myqcloud.com/绿豆沙牛乳.png",
                                    description: "绿豆+牛奶+冰块",
                                    spicyLevel: 0,
                                    added: false
                                },
                                {
                                    id: 605,
                                    name: "多肉葡萄",
                                    price: 0,
                                    image: "https://tianyepic-1368290920.cos.ap-shanghai.myqcloud.com/多肉葡萄.png",
                                    description: "葡萄+酸奶+冰块",
                                    spicyLevel: 0,
                                    added: false
                                }
                            ]
                        }
                    ],
                    cart: []
                }
            },
            created() {
                this.loadCart();
            },
            computed: {
                totalPrice() {
                    return this.cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
                },
                totalItems() {
                    return this.cart.reduce((sum, item) => sum + item.quantity, 0);
                }
            },
            methods: {
                generateCartId() {
                    return Date.now() + Math.random().toString(36).substr(2, 9);
                },
                loadCart() {
                    const savedCart = localStorage.getItem('restaurantCart');
                    if (savedCart) {
                        this.cart = JSON.parse(savedCart);
                        this.cart.forEach(item => {
                            if (!item.cartId) {
                                item.cartId = this.generateCartId();
                            }
                        });
                        this.updateAddedStatus();
                    }
                },
                scrollToCategory(categoryName) {
                    this.activeCategory = categoryName;
                    const element = document.getElementById('category-' + categoryName);
                    if (element) {
                        element.scrollIntoView({ 
                            behavior: 'smooth',
                            block: 'start'
                        });
                    }
                },
                handleScroll() {
                    
                    const categories = this.categories;
                    const scrollPosition = window.scrollY + 100;
                    
                    for (let i = categories.length - 1; i >= 0; i--) {
                        const element = document.getElementById('category-' + categories[i].name);
                        if (element && element.offsetTop <= scrollPosition) {
                            this.activeCategory = categories[i].name;                            
                            break;
                        }
                    }
                },
                switchPage(page) {
                    if (page === 'cart' && this.cart.length === 0) {
                        alert('购物车是空的，请先添加菜品');
                        return;
                    }
                    this.currentPage = page;
                },
                addToCart(item) {
                    const existingItem = this.cart.find(cartItem => cartItem.id === item.id);
                    
                    if (existingItem) {
                        existingItem.quantity += 1;
                    } else {
                        this.cart.push({
                            ...item,
                            cartId: this.generateCartId(),
                            quantity: 1
                        });
                    }
                    
                    item.added = true;
                    // setTimeout(() => {
                    //     item.added = false;
                    // }, 1000);
                    
                    this.saveCart();
                },
                updateQuantity(item, change) {
                    item.quantity += change;
                    
                    if (item.quantity < 1) {
                        this.removeItem(item);
                    } else {
                        this.saveCart();
                    }
                },
                validateQuantity(item) {
                    if (item.quantity < 1) {
                        item.quantity = 1;
                    }
                    this.saveCart();
                },
                removeItem(item) {
                    this.cart = this.cart.filter(cartItem => cartItem.cartId !== item.cartId);
                    this.updateAddedStatus();
                    this.saveCart();
                },
                clearCart() {
                    if (this.cart.length === 0) return;
                    
                    if (confirm('确定要清空购物车吗？')) {
                        this.cart = [];
                        this.updateAddedStatus();
                        this.saveCart();
                        this.currentPage = 'menu';
                    }
                },
                checkout() {
                    if (this.cart.length === 0) {
                        alert('购物车是空的，请先添加菜品');
                        return;
                    }
                    
                    const orderDetails = this.cart.map(item => 
                        `${item.name} × ${item.quantity} = ¥${(item.price * item.quantity).toFixed(2)}`
                    ).join('\n');

                    const orderDetailsPush = this.cart.map(item => 
                        `${item.name} × ${item.quantity}`
                    ).join('\n\n'); 
                    
                    alert(`即将下单：\n\n${orderDetails}\n\n总计: ¥${this.totalPrice.toFixed(2)}\n\n感谢您的惠顾！`);
                    fetch(`https://sctapi.ftqq.com/SCT289192TKPE3LVjZ8Pk5ZOdl1AOtMhRi.send?title=客人下新订单啦&desp=${encodeURIComponent(orderDetailsPush)}`);
                    
                    this.cart = [];
                    this.updateAddedStatus();
                    this.saveCart();
                    this.currentPage = 'menu';
                },
                saveCart() {
                    localStorage.setItem('restaurantCart', JSON.stringify(this.cart));
                },
                updateAddedStatus() {
                    this.categories.forEach(category => {
                        category.items.forEach(item => {
                            item.added = this.cart.some(cartItem => cartItem.id === item.id);
                        });
                    });
                }
            },
            mounted() {
                window.addEventListener('scroll', this.handleScroll);
            },
            beforeDestroy() {
                window.removeEventListener('scroll', this.handleScroll);
            }
        });
    </script>
</body>
</html>