<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Áî∞ÈáéÁöÑÂé®Êàø</title>
    <script src="https://unpkg.com/vue@2.6.14/dist/vue.js"></script>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'PingFang SC', 'Helvetica Neue', Arial, sans-serif;
        }
        
        body {
            background-color: #FFF9F5;
            color: #5A4A42;
            line-height: 1.6;
        }
        
        .container {
            max-width: 750px;
            margin: 0 auto;
            padding: 15px;
            padding-bottom: 100px;
        }
        
        header {
            /* background-color:#FF7F50; */
            background-color: transparent; /* ÈÄèÊòéËÉåÊôØ */
            padding: 10px 0; /* Ê†πÊçÆÂõæÁâáÈ´òÂ∫¶ÂèØËÉΩÈúÄË¶ÅË∞ÉÊï¥ */            
            box-shadow: none; /* ÁßªÈô§Èò¥ÂΩ± */
            color: white;
            padding: 15px 0;
            text-align: center;
            margin-bottom: 20px;
            border-radius: 15px;
            box-shadow: 0 4px 12px rgba(255, 182, 193, 0.3);
            position: relative;
        }

        .cart-header {
            background-color: #7ee2a3; 
        }
        
        .back-button {
            position: absolute;
            left: 15px;
            top: 50%;
            transform: translateY(-50%);
            color: white;
            text-decoration: none;
            font-size: 16px;
            font-weight: bold;
        }
        
        h1 {
            font-size: 22px;
            font-weight: 600;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.1);
        }
        
        .category {
            margin-bottom: 25px;
        }
        
        .category-title {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 15px;
            padding-bottom: 8px;
            border-bottom: 2px solid #FFB6C1;
            color: #5A4A42;
            position: relative;
            padding-left: 15px;
        }
        
        .category-title::before {
            content: "";
            position: absolute;
            left: 0;
            top: 5px;
            height: 20px;
            width: 5px;
            background-color: #FFB6C1;
            border-radius: 5px;
        }
        
        .menu-items {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
            gap: 15px;
        }
        
        .menu-item {
            background-color: white;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 4px 15px rgba(0,0,0,0.05);
            transition: all 0.3s ease;
            position: relative;
            border: 1px solid #FFE8EB;
        }
        
        .menu-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(255, 182, 193, 0.2);
        }
        
        .featured-badge {
            position: absolute;
            top: 10px;
            right: 10px;
            background-color: #FF9AA2;
            color: white;
            font-size: 12px;
            padding: 3px 10px;
            border-radius: 15px;
            font-weight: bold;
            z-index: 2;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        
        .item-image {
            width: 100%;
            height: 120px;
            object-fit: cover;
            border-bottom: 1px solid #FFE8EB;
        }
        
        .item-details {
            padding: 12px;
        }
        
        .item-name {
            font-weight: bold;
            margin-bottom: 5px;
            font-size: 16px;
            color: #5A4A42;
        }
        
        .item-desc {
            font-size: 12px;
            color: #A89F99;
            margin-bottom: 10px;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }
        
        .item-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .item-price {
            font-weight: bold;
            color: #FF9AA2;
            font-size: 16px;
        }
        
        .spicy-level {
            display: flex;
            align-items: center;
        }
        
        .pepper-icon {
            color: #FF6B6B;
            font-size: 14px;
            margin-right: 2px;
        }
        
        .add-to-cart {
            background-color: #FF9AA2;
            color: white;
            border: none;
            border-radius: 8px;
            padding: 8px 10px;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.3s;
            width: 100%;
            margin-top: 5px;
            font-weight: bold;
        }
        
        .add-to-cart:hover {
            background-color: #FF9AA2;
            transform: scale(0.98);
        }
        
        .add-to-cart.added-to-cart {
            background-color: #A8E6CF; /* ÁÇπÂáªÂêéÁöÑÊµÖÁªøËâ≤ */
            color: white;
        }
        .cart-summary {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background-color: white;
            color: #5A4A42;
            padding: 12px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            z-index: 100;
            box-shadow: 0 -4px 15px rgba(0,0,0,0.05);
            border-top: 1px solid #FFE8EB;
        }
        
        .cart-total {
            font-size: 16px;
            font-weight: bold;
        }
        
        .view-cart {
            background-color: #FF9AA2;
            color: white;
            border: none;
            border-radius: 8px;
            padding: 10px 20px;
            font-size: 14px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s;
        }
        
        .view-cart:hover {
            background-color: #FF6B6B;
            transform: scale(0.98);
        }       
        
        .cart-items {
            margin-bottom: 15px;
        }
        
        .cart-item {
            background-color: white;
            border-radius: 15px;
            padding: 15px;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            box-shadow: 0 4px 15px rgba(0,0,0,0.05);
            border: 1px solid #FFE8EB;
        }
        
        .cart-item-image {
            width: 60px;
            height: 60px;
            object-fit: cover;
            border-radius: 10px;
            margin-right: 15px;
            border: 1px solid #FFE8EB;
        }
        
        .cart-item-details {
            flex: 1;
        }
        
        .cart-item-name {
            font-weight: bold;
            margin-bottom: 5px;
            color: #5A4A42;
        }
        
        .cart-item-price {
            color: #FF9AA2;
            font-weight: bold;
        }
        
        .quantity-control {
            display: flex;
            align-items: center;
            margin-top: 5px;
        }
        
        .quantity-btn {
            width: 25px;
            height: 25px;
            background-color: #FFE8EB;
            border: none;
            border-radius: 8px;
            font-size: 14px;
            cursor: pointer;
            color: #FF9AA2;
            font-weight: bold;
            transition: all 0.3s;
        }
        
        .quantity-btn:hover {
            background-color: #FFB6C1;
            color: white;
        }
        
        .quantity-input {
            width: 40px;
            text-align: center;
            margin: 0 5px;
            border: 1px solid #FFE8EB;
            border-radius: 8px;
            padding: 3px;
            color: #5A4A42;
        }
        
        .remove-item {
            color: #FF9AA2;
            background: none;
            border: none;
            margin-left: 15px;
            cursor: pointer;
            font-size: 20px;
            transition: all 0.3s;
        }
        
        .remove-item:hover {
            color: #FF6B6B;
            transform: scale(1.2);
        }
        
        .cart-actions {
            display: flex;
            justify-content: space-between;
            margin-top: 20px;
        }
        
        .clear-cart, .checkout {
            padding: 12px 20px;
            border: none;
            border-radius: 8px;
            font-size: 14px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s;
        }
        
        .clear-cart {
            background-color: #FFE8EB;
            color: #FF9AA2;
        }
        
        .clear-cart:hover {
            background-color: #FFB6C1;
            color: white;
        }
        
        .checkout {
            background-color: #FF9AA2;
            color: white;
        }
        
        .checkout:hover {
            background-color: #FF6B6B;
            transform: scale(0.98);
        }
        
        .empty-cart {
            text-align: center;
            padding: 40px 0;
            color: #A89F99;
        }
        
        .empty-cart p:first-child {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 10px;
            color: #5A4A42;
        }
        .cart-item-count {
            color: #A89F99;
            font-size: 14px;
        }

        .cart-total-price {
            font-size: 18px;
            font-weight: bold;
            color: #FF9AA2;
        }

        .cart-actions {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 20px;
            padding: 15px 0;
            border-top: 1px solid #FFE8EB;
        }

        .checkout-container {
            position: sticky;
            bottom: 70px; /* ÈÅøÂÖç‰∏éÂ∫ïÈÉ®ÁöÑË¥≠Áâ©ËΩ¶Ê±áÊÄªÈáçÂè† */
            background-color: white;
            padding: 15px 0;
            margin-top: 20px;
            border-top: 1px solid #FFE8EB;
        }

        .checkout {
            width: 100%;
            margin-top: 10px;
        }

        .clear-cart {
            padding: 12px 20px;
        }

        .cart-summary {
            /* Á°Æ‰øùÂ∫ïÈÉ®Ë¥≠Áâ©ËΩ¶Ê±áÊÄª‰∏ç‰∏éÁªìÁÆóÊåâÈíÆÈáçÂè† */
            z-index: 100;
        }

        .header-image {
            max-width: 100%;
            height: auto;
            display: block;
            margin: 0 auto;
            border-radius: 10px; /* ‰øùÊåÅ‰∏éheaderÁõ∏ÂêåÁöÑÂúÜËßí */
        }

        /* Ë∞ÉÊï¥headerÁöÑpadding */        

        @media (max-width: 480px) {
            .menu-items {
                grid-template-columns: 1fr;
            }
            
            .item-image {
                height: 150px;
            }
        }
    </style>
</head>
<body>
    <div id="app">
        <!-- ‰∏ªÁÇπËèúÈ°µÈù¢ -->
        <div class="container menu-page" v-show="currentPage === 'menu'">
            <header>
                <!-- <h1>üç¥ ÁæéÂë≥È§êÂéÖ - Âú®Á∫øÁÇπÈ§ê</h1> -->
                <img src="https://tianyepic-1368290920.cos.ap-shanghai.myqcloud.com/header.png" 
                alt="Áî∞ÈáéÁöÑÂé®Êàø" class="header-image" loading="lazy">
            </header>
            
            <div class="category" v-for="category in categories" :key="category.name">
                <h2 class="category-title">{{ category.name }}</h2>
                <div class="menu-items">
                    <div class="menu-item" v-for="item in category.items" :key="item.id">
                        <div class="featured-badge" v-if="item.isFeatured">ÊãõÁâå</div>
                        <img :src="item.image" :alt="item.name" class="item-image" loading="lazy">
                        <div class="item-details">
                            <div class="item-name">{{ item.name }}</div>
                            <div class="item-desc">{{ item.description }}</div>
                            <div class="item-footer">
                                <div class="spicy-level">
                                    <span class="pepper-icon" v-for="n in item.spicyLevel">üå∂Ô∏è</span>
                                </div>
                                <div class="item-price">¬•{{ item.price }}</div>
                            </div>
                            <button class="add-to-cart" 
                                    @click="addToCart(item)"
                                    :class="{ 'added-to-cart': item.added }">
                                {{ item.added ? '‚úì Â∑≤Ê∑ªÂä†' : 'Âä†ÂÖ•Ë¥≠Áâ©ËΩ¶' }}
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Ë¥≠Áâ©ËΩ¶È°µÈù¢ -->
        <div class="container cart-page" v-show="currentPage === 'cart'">
            <header class="cart-header">
                <a href="#" class="back-button" @click.prevent="switchPage('menu')">‚Üê ËøîÂõû</a>
                <h1>üõí ÊàëÁöÑË¥≠Áâ©ËΩ¶</h1>
            </header>
            
            <div class="cart-items">
                <div class="empty-cart" v-if="cart.length === 0">
                    <p>Ë¥≠Áâ©ËΩ¶ÊòØÁ©∫ÁöÑ</p>
                    <p>Âø´ÂéªÊåëÈÄâÁæéÈ£üÂêß~</p>
                </div>
                
                <div class="cart-item" v-for="item in cart" :key="item.cartId">
                    <img :src="item.image" :alt="item.name" class="cart-item-image">
                    <div class="cart-item-details">
                        <div class="cart-item-name">{{ item.name }}</div>
                        <div class="cart-item-price">¬•{{ item.price.toFixed(2) }}</div>
                        <div class="quantity-control">
                            <button class="quantity-btn minus" @click="updateQuantity(item, -1)">-</button>
                            <input type="number" class="quantity-input" v-model.number="item.quantity" min="1" @change="validateQuantity(item)">
                            <button class="quantity-btn plus" @click="updateQuantity(item, 1)">+</button>
                        </div>
                    </div>
                    <button class="remove-item" @click="removeItem(item)">√ó</button>
                </div>
            </div>
            
            <div class="cart-actions" v-if="cart.length > 0">
                <button class="clear-cart" @click="clearCart">Ê∏ÖÁ©∫Ë¥≠Áâ©ËΩ¶</button>
                <div class="text-right">
                    <p class="cart-item-count">ÂÖ± {{ totalItems }} ‰ª∂ÂïÜÂìÅ</p>
                    <p class="cart-total-price">¬•{{ totalPrice.toFixed(2) }}</p>
                </div>
            </div>
            
            <button class="checkout" 
                    @click="checkout" 
                    :disabled="cart.length === 0"
                    v-if="currentPage === 'cart'">
                <i class="fa fa-credit-card-alt mr-2"></i>ÂéªÁªìÁÆó
            </button>
        </div>
        
        <div class="cart-summary" v-show="cart.length > 0 && currentPage === 'menu'">
            <div class="cart-info">
                <div class="cart-total">ÊÄªËÆ°: ¬•{{ totalPrice.toFixed(2) }}</div>
                <div class="cart-count">{{ totalItems }}‰∏™ËèúÂìÅ</div>
            </div>
            <button class="view-cart" @click="switchPage('cart')">Êü•ÁúãË¥≠Áâ©ËΩ¶</button>
        </div>
    </div>

    <script>
        new Vue({
            el: '#app',
            data() {
                return {
                    currentPage: 'menu',
                    categories: [
                        {
                            name: 'ÊãõÁâåÊé®Ëçê',
                            items: [
                                {
                                    id: 100,
                                    name: "Áï™ËåÑËÇâ‰∏∏Ê±§",
                                    price: 0,
                                    image: "https://tianyepic-1368290920.cos.ap-shanghai.myqcloud.com/Áï™ËåÑËÇâ‰∏∏Ê±§.png",
                                    description: "ÈÄâÁî®Êñ∞È≤úÈáåËÑäËÇâÔºåÈÖç‰ª•ÁßòÂà∂Ê±§Â∫ïÔºåÁï™ËåÑÈ≤úÂ´©ÔºåÈÖ∏ÁàΩÂèØÂè£ÔºåÁî∞Â∏àÂÇÖÁöÑÂæóÊÑè‰πã‰Ωú„ÄÇ",
                                    spicyLevel: 0,
                                    isFeatured: true,
                                    added: false
                                },
                                {
                                    id: 101,
                                    name: "ÈùíÊ§íËÇâ‰∏ù",
                                    price: 0,
                                    image: "https://tianyepic-1368290920.cos.ap-shanghai.myqcloud.com/ÈùíÊ§íËÇâ‰∏ù.png",
                                    description: "È≤úÂ´©ËÇâ‰∏ùÊê≠ÈÖçËÑÜÁàΩÈùíÊ§íÔºåÂÆ∂Â∏∏ÁæéÂë≥Ôºå‰∏ãÈ•≠È¶ñÈÄâÔºÅ",
                                    spicyLevel: 1,
                                    isFeatured: true,
                                    added: false
                                },
                                {
                                    id: 102,
                                    name: "ÊéíÈ™®ÁÇñÁ∫¢ËñØÁ≤â‰∏ù",
                                    price: 0,
                                    image: "https://tianyepic-1368290920.cos.ap-shanghai.myqcloud.com/ÊéíÈ™®Á∫¢ËñØÁ≤â‰∏ù.png",
                                    description: "ÂÜúÂÆ∂Ëá™Âà∂ËÖäÊéíÈ™®ÔºåËá™Âà∂Á≤â‰∏ùÔºåÂú®Â§ñÈù¢ÂèØÂêÉ‰∏çÂà∞Âô¢„ÄÇ",
                                    spicyLevel: 1,
                                    isFeatured: true,
                                    added: false
                                }
                            ]
                        },
                        {
                            name: 'Â∑ùÊπòÈ£éÂë≥',
                            items: [
                                {
                                    id: 200,
                                    name: "Ëæ£Â≠êÈ∏°",
                                    price: 0,
                                    image: "https://tianyepic-1368290920.cos.ap-shanghai.myqcloud.com/Ëæ£Â≠êÈ∏°.png",
                                    description: "Ëæ£Ëæ£Ëæ£Ôºå‰Ω†ËÉΩÊé•ÂèóÊàëÁöÑËæ£Âë≥ÊåëÊàòÂêóÔºü",
                                    spicyLevel: 4,
                                    added: false
                                },
                                {
                                    id: 201,
                                    name: "Âπ≤ÁÖ∏Ë±ÜËßí",
                                    price: 0,
                                    image: "https://tianyepic-1368290920.cos.ap-shanghai.myqcloud.com/Âπ≤ÁÖ∏Ë±ÜËßí.png",
                                    description: "Â§ñÈÖ•ÈáåÂ´©ÔºåË∂äÂöºË∂äÈ¶ôÔºÅ",
                                    spicyLevel: 3,
                                    added: false
                                },
                                {
                                    id: 202,
                                    name: "Ê≤πÁÑñËåÑÂ≠ê",
                                    price: 0,
                                    image: "https://tianyepic-1368290920.cos.ap-shanghai.myqcloud.com/Ê≤πÁÑñËåÑÂ≠ê.png",
                                    description: "ÂêÉËµ∑Êù•ËΩØËΩØÁöÑ„ÄÇ",
                                    spicyLevel: 0,
                                    added: false
                                }
                            ]
                        },
                        {
                            name: 'ÂÆ∂Â∏∏ËèúËÇ¥',
                            items: [
                                {
                                    id: 300,
                                    name: "ÈùíÊ§íÁÇíÈ∏°Ëõã",
                                    price: 0,
                                    image: "https://tianyepic-1368290920.cos.ap-shanghai.myqcloud.com/ÈùíÊ§íÁÇíËõã.png",
                                    description: "Ëá™ÂÆ∂ÁöÑÂúüÈ∏°ËõãÔºåÊõ¥È¶ô„ÄÇ",
                                    spicyLevel: 2,
                                    added: false
                                },
                                {
                                    id: 310,
                                    name: "Ë•øÁ∫¢ÊüøÁÇíËõã",
                                    price: 0,
                                    image: "https://tianyepic-1368290920.cos.ap-shanghai.myqcloud.com/Ë•øÁ∫¢ÊüøÁÇíËõã.png",
                                    description: "üçÖü•öüòäüòä„ÄÇ",
                                    spicyLevel: 0,
                                    added: false
                                },
                                {
                                    id: 301,
                                    name: "ËÖäËÇ†",
                                    price: 0,
                                    image: "https://tianyepic-1368290920.cos.ap-shanghai.myqcloud.com/ËÖäËÇ†.png",
                                    description: "ÂÜúÂÆ∂Ëá™Âà∂ËÖäÈ¶ôËÇ†ÔºåÂéüÊ±ÅÂéüÂë≥„ÄÇ",
                                    spicyLevel: 1,
                                    added: false
                                },
                                {
                                    id: 303,
                                    name: "È¶ôÂπ≤ÁÇíËÇâ",
                                    price: 0,
                                    image: "https://tianyepic-1368290920.cos.ap-shanghai.myqcloud.com/È¶ôÂπ≤ÁÇíËÇâ.png",
                                    description: "ÈÖ±È¶ôË±ÜÂπ≤Â´©ËÇâÁâáÔºåÂí∏È≤ú‰∏ãÈ•≠ÔºåÂõûÂë≥ÂçÅË∂≥ÔºÅ",
                                    spicyLevel: 1,
                                    added: false
                                },
                                {
                                    id: 304,
                                    name: "ËÉ°ËêùÂçúÁÇíËÇâ",
                                    price: 0,
                                    image: "https://tianyepic-1368290920.cos.ap-shanghai.myqcloud.com/ËÉ°ËêùÂçúÁÇíËÇâ.png",
                                    description: "ÁîúËÑÜËÉ°ËêùÂçúü•ïÈÖçÂ´©ÊªëËÇâÔºåËê•ÂÖªÂèàÁæéÂë≥ÔºÅ",
                                    spicyLevel: 0,
                                    added: false
                                },
                                {
                                    id: 305,
                                    name: "Á∫¢ÁÉßÈ≤´È±º",
                                    price: 0,
                                    image: "https://tianyepic-1368290920.cos.ap-shanghai.myqcloud.com/Á∫¢ÁÉßÈ≤´È±º.png",
                                    description: "È±ºËÇâÈ≤úÂ´©ÈÖ±È¶ôÊµìüêüÔºåÂÆ∂Â∏∏ÁªèÂÖ∏Â•ΩÊªãÂë≥ÔºÅ",
                                    spicyLevel: 1,
                                    added: false
                                },
                                {
                                    id: 306,
                                    name: "Âï§ÈÖíÈ∏≠",
                                    price: 0,
                                    image: "https://tianyepic-1368290920.cos.ap-shanghai.myqcloud.com/Âï§ÈÖíÈ∏≠.png",
                                    description: "Âï§ÈÖíÁÇñÈ∏≠ËÇâÈÖ•ÁÉÇÔºåÈÖíÈ¶ôÂõõÊ∫¢Ë∂ÖÂÖ•Âë≥ÔºÅ",
                                    spicyLevel: 2,
                                    added: false
                                },
                                {
                                    id: 307,
                                    name: "ÈÖ∏Ëæ£ÂúüË±Ü‰∏ù",
                                    price: 0,
                                    image: "https://tianyepic-1368290920.cos.ap-shanghai.myqcloud.com/ÈÖ∏Ëæ£ÂúüË±Ü‰∏ù.png",
                                    description: "ËÑÜÁàΩÈÖ∏Ëæ£ÂúüË±Ü‰∏ùÔºåÂºÄËÉÉËß£ËÖªÂøÖÁÇπËèúÔºÅ",
                                    spicyLevel: 1,
                                    added: false
                                },
                                {
                                    id: 308,
                                    name: "ÂúüË±ÜÁÇñÁâõËÖ©",
                                    price: 0,
                                    image: "https://tianyepic-1368290920.cos.ap-shanghai.myqcloud.com/ÂúüË±ÜÁÇñÁâõËÖ©.png",
                                    description: "ËΩØÁ≥ØÂúüË±ÜÈÖçÈ¶ôÊµìÁâõËÖ©ÔºåÊöñËÉÉÂèàÊª°Ë∂≥ÔºÅ",
                                    spicyLevel: 2,
                                    added: false
                                },
                                {
                                    id: 309,
                                    name: "ÈªÑÁìúÁÅ´ËÖø",
                                    price: 0,
                                    image: "https://tianyepic-1368290920.cos.ap-shanghai.myqcloud.com/ÈªÑÁìúÁÅ´ËÖø.png",
                                    description: "Ëøá‰∏ÄËøáÊÉ≥ÂêÉÊ∑ÄÁ≤âËÇ†ÁöÑÁòæ„ÄÇ",
                                    spicyLevel: 0,
                                    added: false
                                }
                            ]
                        },
                        {
                            name: 'Ê∏ÖÊ∑°ËèúÂìÅ',
                            items: [
                                {
                                    id: 400,
                                    name: "Ê∏ÖÁÇíÊó∂Ëî¨",
                                    price: 0,
                                    image: "https://tianyepic-1368290920.cos.ap-shanghai.myqcloud.com/Ê∏ÖÁÇíÊó∂Ëî¨.png",
                                    description: "Êàë‰ºöÁÇíÂêÑÁßçÈùíËèúÔºåÂÅ•Â∫∑ÂèàÁæéÂë≥~",
                                    spicyLevel: 0,
                                    added: false
                                },
                                {
                                    id: 401,
                                    name: "Ëôæ‰ªÅËí∏Ëõã",
                                    price: 0,
                                    image: "https://tianyepic-1368290920.cos.ap-shanghai.myqcloud.com/Ëôæ‰ªÅËí∏Ëõã.png",
                                    description: "È∏°Ëõã‰∏éÈ´òÊ±§ÂÆåÁæéÊØî‰æãËí∏Âà∂ÔºåË°®Èù¢ÂÖâÊªëÂ¶ÇÈïúÔºåÈÖç‰ª•Êñ∞È≤úËôæ‰ªÅÔºåÂè£ÊÑüÁªÜËÖª„ÄÇ",
                                    spicyLevel: 0,
                                    added: false
                                },
                                {
                                    id: 402,
                                    name: "ÁéâÁ±≥ÊéíÈ™®Ê±§",
                                    price: 0,
                                    image: "https://tianyepic-1368290920.cos.ap-shanghai.myqcloud.com/ÁéâÁ±≥ÊéíÈ™®Ê±§.png",
                                    description: "È≤úÁîúÁéâÁ±≥ÁÇñËΩØÂ´©ÊéíÈ™®ÔºåÊöñÂøÉÊöñËÉÉÔºåÊªãË°•ÂèàÁæéÂë≥ÔºÅ",
                                    spicyLevel: 0,
                                    added: false
                                },
                                {
                                    id: 403,
                                    name: "Ê∏ÖÁÇí‰∏ùÁìú",
                                    price: 0,
                                    image: "https://tianyepic-1368290920.cos.ap-shanghai.myqcloud.com/Ê∏ÖÁÇí‰∏ùÁìú.png",
                                    description: "Ê∏ÖÊ∏ÖÁîúÁîúÁöÑ‰∏ùÁìúÔºåÊàëÂñúÊ¨¢(‚ù§ œâ ‚ù§)",
                                    spicyLevel: 0,
                                    added: false
                                }
                            ]
                        }
                    ],
                    cart: []
                }
            },
            created() {
                this.loadCart();
            },
            computed: {
                totalPrice() {
                    return this.cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
                },
                totalItems() {
                    return this.cart.reduce((sum, item) => sum + item.quantity, 0);
                }
            },
            methods: {
                generateCartId() {
                    return Date.now() + Math.random().toString(36).substr(2, 9);
                },
                loadCart() {
                    const savedCart = localStorage.getItem('restaurantCart');
                    if (savedCart) {
                        this.cart = JSON.parse(savedCart);
                        // Á°Æ‰øùÊØè‰∏™Ë¥≠Áâ©ËΩ¶È°πÈÉΩÊúâcartId
                        this.cart.forEach(item => {
                            if (!item.cartId) {
                                item.cartId = this.generateCartId();
                            }
                        });
                        this.updateAddedStatus();
                    }
                },
                switchPage(page) {
                    if (page === 'cart' && this.cart.length === 0) {
                        alert('Ë¥≠Áâ©ËΩ¶ÊòØÁ©∫ÁöÑÔºåËØ∑ÂÖàÊ∑ªÂä†ËèúÂìÅ');
                        return;
                    }
                    this.currentPage = page;
                },
                addToCart(item) {
                    const existingItem = this.cart.find(cartItem => cartItem.id === item.id);
                    
                    if (existingItem) {
                        existingItem.quantity += 1;
                    } else {
                        this.cart.push({
                            ...item,
                            cartId: this.generateCartId(),
                            quantity: 1
                        });
                    }
                    
                    item.added = true;
                    setTimeout(() => {
                        item.added = false;
                    }, 1000);
                    
                    this.saveCart();
                },
                updateQuantity(item, change) {
                    item.quantity += change;
                    
                    if (item.quantity < 1) {
                        this.removeItem(item);
                    } else {
                        this.saveCart();
                    }
                },
                validateQuantity(item) {
                    if (item.quantity < 1) {
                        item.quantity = 1;
                    }
                    this.saveCart();
                },
                removeItem(item) {
                    this.cart = this.cart.filter(cartItem => cartItem.cartId !== item.cartId);
                    this.updateAddedStatus();
                    this.saveCart();
                },
                clearCart() {
                    if (this.cart.length === 0) return;
                    
                    if (confirm('Á°ÆÂÆöË¶ÅÊ∏ÖÁ©∫Ë¥≠Áâ©ËΩ¶ÂêóÔºü')) {
                        this.cart = [];
                        this.updateAddedStatus();
                        this.saveCart();
                        this.currentPage = 'menu';
                    }
                },
                checkout() {
                    if (this.cart.length === 0) {
                        alert('Ë¥≠Áâ©ËΩ¶ÊòØÁ©∫ÁöÑÔºåËØ∑ÂÖàÊ∑ªÂä†ËèúÂìÅ');
                        return;
                    }
                    
                    const orderDetails = this.cart.map(item => 
                        `${item.name} √ó ${item.quantity} = ¬•${(item.price * item.quantity).toFixed(2)}`
                    ).join('\n');

                    const orderDetailsPush = this.cart.map(item => 
                        `${item.name} √ó ${item.quantity}`
                    ).join('\n\n'); 
                    
                    alert(`Âç≥Â∞Ü‰∏ãÂçïÔºö\n\n${orderDetails}\n\nÊÄªËÆ°: ¬•${this.totalPrice.toFixed(2)}\n\nÊÑüË∞¢ÊÇ®ÁöÑÊÉ†È°æÔºÅ`);
                    //Êé®ÈÄÅserverÈÖ±ÂæÆ‰ø°ÊúçÂä°Âè∑
                    fetch(`https://sctapi.ftqq.com/SCT289192TKPE3LVjZ8Pk5ZOdl1AOtMhRi.send?title=ÂÆ¢‰∫∫‰∏ãÊñ∞ËÆ¢ÂçïÂï¶&desp=${encodeURIComponent(orderDetailsPush)}`);
                    
                    this.cart = [];
                    this.updateAddedStatus();
                    this.saveCart();
                    this.currentPage = 'menu';
                },
                saveCart() {
                    localStorage.setItem('restaurantCart', JSON.stringify(this.cart));
                },
                updateAddedStatus() {
                    this.categories.forEach(category => {
                        category.items.forEach(item => {
                            item.added = this.cart.some(cartItem => cartItem.id === item.id);
                        });
                    });
                }
            }
        });
    </script>
</body>
</html>